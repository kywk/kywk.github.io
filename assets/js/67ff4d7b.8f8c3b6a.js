"use strict";(self.webpackChunkkywk_github_io=self.webpackChunkkywk_github_io||[]).push([[48638],{77339:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var t=s(85893),a=s(11151);const i={title:"Value Defaults",description:"Spring Core Basics: Value Defaults",tags:["SpringBoot","Tutorial","SpringBoot/CoreBasics","SpringBoot/Properties"],date_created:new Date("2023-08-23T00:00:00.000Z"),date_updated:new Date("2023-08-23T00:00:00.000Z"),image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0"},r="[Spring] @Value Defaults",l={id:"java/springboot/spring/spring_value-defaults",title:"Value Defaults",description:"Spring Core Basics: Value Defaults",source:"@site/moco/java/springboot/spring/spring_value-defaults.md",sourceDirName:"java/springboot/spring",slug:"/java/springboot/spring/spring_value-defaults",permalink:"/moco/java/springboot/spring/spring_value-defaults",draft:!1,unlisted:!1,tags:[{label:"SpringBoot",permalink:"/moco/tags/spring-boot"},{label:"Tutorial",permalink:"/moco/tags/tutorial"},{label:"SpringBoot/CoreBasics",permalink:"/moco/tags/spring-boot-core-basics"},{label:"SpringBoot/Properties",permalink:"/moco/tags/spring-boot-properties"}],version:"current",frontMatter:{title:"Value Defaults",description:"Spring Core Basics: Value Defaults",tags:["SpringBoot","Tutorial","SpringBoot/CoreBasics","SpringBoot/Properties"],date_created:"2023-08-23T00:00:00.000Z",date_updated:"2023-08-23T00:00:00.000Z",image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0"},sidebar:"tutorialSidebar",previous:{title:"Value Annotation",permalink:"/moco/java/springboot/spring/spring_value-annotation"},next:{title:"OpenJDK",permalink:"/moco/java/sdk_open-jdk"}},o={},u=[{value:"Overview",id:"overview",level:2},{value:"String Defaults",id:"string-defaults",level:2},{value:"Primitives",id:"primitives",level:2},{value:"Arrays",id:"arrays",level:2},{value:"Using SpEL",id:"using-spel",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"spring-value-defaults",children:"[Spring] @Value Defaults"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Src: ",(0,t.jsx)(n.a,{href:"https://www.baeldung.com/spring-value-defaults",children:"Using Spring @Value with Defaults | Baeldung"}),(0,t.jsx)(n.br,{}),"\nNoted: 2023-08-23"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["Spring's ",(0,t.jsx)(n.em,{children:"@Value"})," annotation provides a convenient way to inject property values into components.\nIt's also quite useful to ",(0,t.jsx)(n.strong,{children:"provide sensible defaults for cases where a property may not be present"}),"\n\u2014 how to specify a default value for the @Value Spring annotation."]}),"\n",(0,t.jsx)(n.h2,{id:"string-defaults",children:"String Defaults"}),"\n",(0,t.jsxs)(n.p,{children:["Let's look at the basic syntax for setting a default value for a ",(0,t.jsx)(n.em,{children:"String property"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:my default value}")\nprivate String stringWithDefaultValue;\n'})}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.em,{children:"some.key"})," cannot be resolved, ",(0,t.jsx)(n.em,{children:"stringWithDefaultValue"})," will be set to the default value of ",(0,t.jsx)(n.em,{children:"my default value"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Similarly, we can set a ",(0,t.jsx)(n.em,{children:"zero-length String"})," as the default value:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:}")\nprivate String stringWithBlankDefaultValue;\n'})}),"\n",(0,t.jsxs)(n.p,{children:["@Value annotation ",(0,t.jsx)(n.code,{children:":"})," \u5f8c\u9762\u5373\u70ba default value. \u6c92\u6709\u7d66\u4efb\u4f55\u503c\u7684\u8a71\u4e26\u4e0d\u70ba ",(0,t.jsx)(n.code,{children:"null"}),", \u800c\u56e0\u4e0d\u540c\u7269\u4ef6\u6703\u6709\u4e0d\u540c\u8cc7\u6599\u5167\u5bb9.\nString \u7684\u8a71\u6703\u662f\u7a7a\u5b57\u4e32 ",(0,t.jsx)(n.code,{children:'""'})]}),"\n",(0,t.jsx)(n.h2,{id:"primitives",children:"Primitives"}),"\n",(0,t.jsxs)(n.p,{children:["To set a default value for primitive types such as ",(0,t.jsx)(n.em,{children:"boolean"})," and ",(0,t.jsx)(n.em,{children:"int"}),", we use the literal value:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:true}")\nprivate boolean booleanWithDefaultValue;\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:42}")\nprivate int intWithDefaultValue;\n'})}),"\n",(0,t.jsxs)(n.p,{children:["If we wanted to, we could use primitive wrappers instead by changing the types to ",(0,t.jsx)(n.em,{children:"Boolean"})," and ",(0,t.jsx)(n.em,{children:"Integer"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"arrays",children:"Arrays"}),"\n",(0,t.jsxs)(n.p,{children:["We can also inject a comma ",(0,t.jsx)(n.code,{children:","})," separated list of values into an array:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:one,two,three}")\nprivate String[] stringArrayWithDefaults;\n\n@Value("${some.key:1,2,3}")\nprivate int[] intArrayWithDefaults;\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In the first example above, the values ",(0,t.jsx)(n.em,{children:"one"}),", ",(0,t.jsx)(n.em,{children:"two"})," and ",(0,t.jsx)(n.em,{children:"three"})," are injected as defaults into ",(0,t.jsx)(n.em,{children:"stringArrayWithDefaults"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"using-spel",children:"Using SpEL"}),"\n",(0,t.jsx)(n.p,{children:"We can also use Spring Expression Language (SpEL) to specify an expression and a default."}),"\n",(0,t.jsxs)(n.p,{children:["In the example below, we expect ",(0,t.jsx)(n.em,{children:"some.system.key"})," to be set as a system property,\nand if it is not set, we want to use ",(0,t.jsx)(n.em,{children:"my default system property"})," value as a default:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Value(\"#{systemProperties['some.key'] ?: 'my default system property value'}\")\nprivate String spelWithDefaultValue;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(n.p,{children:["Spring @Value \u88e1\u9762\u7684\u7684\u683c\u5f0f\u898f\u7bc4\u985e\u4f3c YAML, \u7528 ",(0,t.jsx)(n.code,{children:","})," \u5340\u9694\u9663\u5217\u5143\u7d20, \u975e\u5fc5\u8981\u4e26\u7121\u9808\u7279\u5225\u52a0\u4e0a ",(0,t.jsx)(n.code,{children:'""'})," ... \u7b49.\n\u4f46\u82e5\u5b57\u4e32\u4e2d\u6709\u6df7\u96dc\u7279\u6b8a\u5b57\u5143\u7b49\u5c0e\u81f4\u8aa4\u5224, \u53ef\u5229\u7528 ",(0,t.jsx)(n.code,{children:"'"})," \u55ae\u5f15\u865f\u4f86\u5b9a\u7fa9\u5b57\u4e32."]}),"\n",(0,t.jsxs)(n.p,{children:["This article looked at how to set a default value for a property whose value we would like to have injected using Spring's ",(0,t.jsx)(n.em,{children:"@Value"})," annotation."]}),"\n",(0,t.jsxs)(n.p,{children:["As usual, all the code samples used in this article can found in the ",(0,t.jsx)(n.a,{href:"https://github.com/eugenp/tutorials/tree/master/spring-boot-modules/spring-boot-properties-2",children:"GitHub project"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/eugenp/tutorials/tree/master/spring-boot-modules/spring-boot-properties-2",children:"GitHub project"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/moco/java/springboot/spring/spring_value-annotation",children:"@Value Annotation"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>r});var t=s(67294);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);