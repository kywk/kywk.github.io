"use strict";(self.webpackChunkkywk_me=self.webpackChunkkywk_me||[]).push([["96891"],{50281:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>c,toc:()=>t,default:()=>h,metadata:()=>i,assets:()=>d,contentTitle:()=>o});var i=JSON.parse('{"id":"utilities/CLI/Rclone Dropbox","title":"Rclone: Dropbox","description":"Rclone Dropbox","source":"@site/moco/utilities/CLI/Rclone Dropbox.md","sourceDirName":"utilities/CLI","slug":"/utilities/cli/rclone-dropbox/","permalink":"/moco/utilities/cli/rclone-dropbox/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Utility/Rclone","permalink":"/moco/tags/utility-rclone"},{"inline":true,"label":"Dropbox","permalink":"/moco/tags/dropbox"}],"version":"current","sidebarPosition":90,"frontMatter":{"title":"Rclone: Dropbox","description":"Rclone Dropbox","tags":["Utility/Rclone","Dropbox"],"sidebar_position":90,"date_created":"2022-09-21T16:00:00.000Z","image":"https://i.imgur.com/mErPwqL.png","slug":"/utilities/cli/rclone-dropbox/"},"sidebar":"tutorialSidebar","previous":{"title":"Tar \u52A0\u5BC6\u6253\u5305","permalink":"/moco/utilities/cli/tar-encrypt-tarball/"},"next":{"title":"Rclone: ignore","permalink":"/moco/utilities/cli/rclone-ignore/"}}'),r=l(74848),s=l(84429);let c={title:"Rclone: Dropbox",description:"Rclone Dropbox",tags:["Utility/Rclone","Dropbox"],sidebar_position:90,date_created:new Date("2022-09-21T16:00:00.000Z"),image:"https://i.imgur.com/mErPwqL.png",slug:"/utilities/cli/rclone-dropbox/"},o="Rclone Dropbox \u540C\u6B65\u914D\u7F6E",d={},t=[{value:"\u57FA\u672C\u914D\u7F6E",id:"\u57FA\u672C\u914D\u7F6E",level:2},{value:"\u74B0\u5883\u8B8A\u6578\u8A2D\u5B9A",id:"\u74B0\u5883\u8B8A\u6578\u8A2D\u5B9A",level:3},{value:"\u53C3\u6578\u8AAA\u660E",id:"\u53C3\u6578\u8AAA\u660E",level:3},{value:"\u540C\u6B65\u8173\u672C",id:"\u540C\u6B65\u8173\u672C",level:2},{value:"Obsidian \u7B46\u8A18\u540C\u6B65",id:"obsidian-\u7B46\u8A18\u540C\u6B65",level:3},{value:"\u901A\u7528\u6A94\u6848\u540C\u6B65",id:"\u901A\u7528\u6A94\u6848\u540C\u6B65",level:3},{value:"\u9032\u968E\u7528\u6CD5",id:"\u9032\u968E\u7528\u6CD5",level:2},{value:"\u4E7E\u8DD1\u6A21\u5F0F (Dry Run)",id:"\u4E7E\u8DD1\u6A21\u5F0F-dry-run",level:3},{value:"\u589E\u91CF\u5099\u4EFD",id:"\u589E\u91CF\u5099\u4EFD",level:3},{value:"\u6A94\u6848\u904E\u6FFE",id:"\u6A94\u6848\u904E\u6FFE",level:3},{value:"\u6548\u80FD\u6700\u4F73\u5316",id:"\u6548\u80FD\u6700\u4F73\u5316",level:2},{value:"\u7DB2\u8DEF\u983B\u5BEC\u9650\u5236",id:"\u7DB2\u8DEF\u983B\u5BEC\u9650\u5236",level:3},{value:"\u5927\u6A94\u6848\u8655\u7406",id:"\u5927\u6A94\u6848\u8655\u7406",level:3},{value:"\u76E3\u63A7\u8207\u65E5\u8A8C",id:"\u76E3\u63A7\u8207\u65E5\u8A8C",level:2},{value:"\u8A73\u7D30\u65E5\u8A8C",id:"\u8A73\u7D30\u65E5\u8A8C",level:3},{value:"\u540C\u6B65\u72C0\u614B\u6AA2\u67E5",id:"\u540C\u6B65\u72C0\u614B\u6AA2\u67E5",level:3},{value:"\u5B89\u5168\u6CE8\u610F\u4E8B\u9805",id:"\u5B89\u5168\u6CE8\u610F\u4E8B\u9805",level:2},{value:"\u5099\u4EFD\u7B56\u7565",id:"\u5099\u4EFD\u7B56\u7565",level:3},{value:"\u7248\u672C\u63A7\u5236",id:"\u7248\u672C\u63A7\u5236",level:3},{value:"\u81EA\u52D5\u5316\u8173\u672C",id:"\u81EA\u52D5\u5316\u8173\u672C",level:2},{value:"\u5B9A\u6642\u540C\u6B65",id:"\u5B9A\u6642\u540C\u6B65",level:3},{value:"Crontab \u8A2D\u5B9A",id:"crontab-\u8A2D\u5B9A",level:3},{value:"See Also",id:"see-also",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"rclone-dropbox-\u540C\u6B65\u914D\u7F6E",children:"Rclone Dropbox \u540C\u6B65\u914D\u7F6E"})}),"\n",(0,r.jsx)(n.p,{children:"Rclone \u8207 Dropbox \u6574\u5408\u7684\u540C\u6B65\u8173\u672C\u914D\u7F6E\uFF0C\u652F\u63F4\u591A\u57F7\u884C\u7DD2\u50B3\u8F38\u548C\u9032\u5EA6\u986F\u793A\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u57FA\u672C\u914D\u7F6E",children:"\u57FA\u672C\u914D\u7F6E"}),"\n",(0,r.jsx)(n.h3,{id:"\u74B0\u5883\u8B8A\u6578\u8A2D\u5B9A",children:"\u74B0\u5883\u8B8A\u6578\u8A2D\u5B9A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Rclone \u540C\u6B65\u53C3\u6578\u914D\u7F6E\nexport RCLONE_CONF="--multi-thread-streams=25 --transfers=25 --checkers=25 --stats=10s --create-empty-src-dirs --progress --progress-terminal-title --delete-before"\n\n# Dropbox \u9060\u7AEF\u548C\u672C\u5730\u8DEF\u5F91\nexport DBX_REMOTE="dropbox"\nexport DBX_LOCAL="$KYWK_HOME"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u53C3\u6578\u8AAA\u660E",children:"\u53C3\u6578\u8AAA\u660E"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u53C3\u6578"}),(0,r.jsx)(n.th,{children:"\u8AAA\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--multi-thread-streams=25"})}),(0,r.jsx)(n.td,{children:"\u591A\u57F7\u884C\u7DD2\u4E32\u6D41\u6578\u91CF"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--transfers=25"})}),(0,r.jsx)(n.td,{children:"\u540C\u6642\u50B3\u8F38\u6A94\u6848\u6578\u91CF"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--checkers=25"})}),(0,r.jsx)(n.td,{children:"\u540C\u6642\u6AA2\u67E5\u6A94\u6848\u6578\u91CF"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--stats=10s"})}),(0,r.jsx)(n.td,{children:"\u6BCF 10 \u79D2\u986F\u793A\u7D71\u8A08\u8CC7\u8A0A"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--create-empty-src-dirs"})}),(0,r.jsx)(n.td,{children:"\u5EFA\u7ACB\u7A7A\u7684\u4F86\u6E90\u76EE\u9304"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--progress"})}),(0,r.jsx)(n.td,{children:"\u986F\u793A\u50B3\u8F38\u9032\u5EA6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--progress-terminal-title"})}),(0,r.jsx)(n.td,{children:"\u5728\u7D42\u7AEF\u6A19\u984C\u986F\u793A\u9032\u5EA6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--delete-before"})}),(0,r.jsx)(n.td,{children:"\u50B3\u8F38\u524D\u5148\u522A\u9664\u76EE\u6A19\u591A\u9918\u6A94\u6848"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u540C\u6B65\u8173\u672C",children:"\u540C\u6B65\u8173\u672C"}),"\n",(0,r.jsx)(n.h3,{id:"obsidian-\u7B46\u8A18\u540C\u6B65",children:"Obsidian \u7B46\u8A18\u540C\u6B65"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u5F9E Dropbox \u4E0B\u8F09\u5230\u672C\u5730\nalias pull-obs="rclone sync $DBX_REMOTE:/obsidian $KYWK_HOME/Obsidian --exclude-from=$KYWK_HOME/Obsidian/.rcloneignore $RCLONE_CONF"\n\n# \u5F9E\u672C\u5730\u4E0A\u50B3\u5230 Dropbox\nalias push-obs="rclone sync $KYWK_HOME/obsidian $DBX_REMOTE:/obsidian --exclude-from=$KYWK_HOME/Obsidian/.rcloneignore $RCLONE_CONF"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u901A\u7528\u6A94\u6848\u540C\u6B65",children:"\u901A\u7528\u6A94\u6848\u540C\u6B65"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u540C\u6B65\u7576\u524D\u76EE\u9304\u5230 Dropbox \u5171\u4EAB\u8CC7\u6599\u593E\nalias push-here="rclone sync . $DBX_REMOTE:Share/rclone $RCLONE_CONF"\n\n# \u96D9\u5411\u540C\u6B65 (\u9700\u8B39\u614E\u4F7F\u7528)\nalias bisync-obs="rclone bisync $KYWK_HOME/obsidian $DBX_REMOTE:/obsidian --exclude-from=$KYWK_HOME/Obsidian/.rcloneignore $RCLONE_CONF"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u9032\u968E\u7528\u6CD5",children:"\u9032\u968E\u7528\u6CD5"}),"\n",(0,r.jsx)(n.h3,{id:"\u4E7E\u8DD1\u6A21\u5F0F-dry-run",children:"\u4E7E\u8DD1\u6A21\u5F0F (Dry Run)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u9810\u89BD\u540C\u6B65\u64CD\u4F5C\uFF0C\u4E0D\u5BE6\u969B\u57F7\u884C\nrclone sync source destination --dry-run $RCLONE_CONF\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u589E\u91CF\u5099\u4EFD",children:"\u589E\u91CF\u5099\u4EFD"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4F7F\u7528 copy \u800C\u975E sync\uFF0C\u4FDD\u7559\u76EE\u6A19\u7AEF\u984D\u5916\u6A94\u6848\nrclone copy $KYWK_HOME/obsidian $DBX_REMOTE:/obsidian-backup $RCLONE_CONF\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u6A94\u6848\u904E\u6FFE",children:"\u6A94\u6848\u904E\u6FFE"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u6392\u9664\u7279\u5B9A\u6A94\u6848\u985E\u578B\nrclone sync source destination --exclude "*.tmp" --exclude "*.log" $RCLONE_CONF\n\n# \u4F7F\u7528\u904E\u6FFE\u6A94\u6848\nrclone sync source destination --exclude-from=.rcloneignore $RCLONE_CONF\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6548\u80FD\u6700\u4F73\u5316",children:"\u6548\u80FD\u6700\u4F73\u5316"}),"\n",(0,r.jsx)(n.h3,{id:"\u7DB2\u8DEF\u983B\u5BEC\u9650\u5236",children:"\u7DB2\u8DEF\u983B\u5BEC\u9650\u5236"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u9650\u5236\u4E0A\u50B3\u983B\u5BEC\u70BA 10MB/s\nrclone sync source destination --bwlimit 10M $RCLONE_CONF\n\n# \u5206\u6642\u6BB5\u9650\u5236\u983B\u5BEC\nrclone sync source destination --bwlimit "08:00,512k 19:00,10M 23:00,off" $RCLONE_CONF\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5927\u6A94\u6848\u8655\u7406",children:"\u5927\u6A94\u6848\u8655\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u8ABF\u6574\u5927\u6A94\u6848\u7684\u5206\u584A\u5927\u5C0F\nrclone sync source destination --dropbox-chunk-size 128M $RCLONE_CONF\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u76E3\u63A7\u8207\u65E5\u8A8C",children:"\u76E3\u63A7\u8207\u65E5\u8A8C"}),"\n",(0,r.jsx)(n.h3,{id:"\u8A73\u7D30\u65E5\u8A8C",children:"\u8A73\u7D30\u65E5\u8A8C"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u8F38\u51FA\u8A73\u7D30\u65E5\u8A8C\u5230\u6A94\u6848\nrclone sync source destination $RCLONE_CONF --log-file=rclone.log --log-level INFO\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u540C\u6B65\u72C0\u614B\u6AA2\u67E5",children:"\u540C\u6B65\u72C0\u614B\u6AA2\u67E5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u6AA2\u67E5\u5169\u7AEF\u5DEE\u7570\nrclone check source destination\n\n# \u5217\u51FA\u5DEE\u7570\u6A94\u6848\nrclone check source destination --one-way\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5B89\u5168\u6CE8\u610F\u4E8B\u9805",children:"\u5B89\u5168\u6CE8\u610F\u4E8B\u9805"}),"\n",(0,r.jsx)(n.h3,{id:"\u5099\u4EFD\u7B56\u7565",children:"\u5099\u4EFD\u7B56\u7565"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5EFA\u7ACB\u5099\u4EFD\u5F8C\u518D\u540C\u6B65\ncp -r important_folder important_folder.backup\nrclone sync important_folder $DBX_REMOTE:/backup\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7248\u672C\u63A7\u5236",children:"\u7248\u672C\u63A7\u5236"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u555F\u7528 Dropbox \u7248\u672C\u63A7\u5236\nrclone sync source destination --backup-dir $DBX_REMOTE:/versions/$(date +%Y%m%d)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u81EA\u52D5\u5316\u8173\u672C",children:"\u81EA\u52D5\u5316\u8173\u672C"}),"\n",(0,r.jsx)(n.h3,{id:"\u5B9A\u6642\u540C\u6B65",children:"\u5B9A\u6642\u540C\u6B65"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# sync-obsidian.sh\n\nset -euo pipefail\n\nlog() {\n    echo "[$(date \'+%Y-%m-%d %H:%M:%S\')] $*"\n}\n\nlog "Starting Obsidian sync..."\n\n# \u6AA2\u67E5\u7DB2\u8DEF\u9023\u7DDA\nif ! ping -c 1 dropbox.com >/dev/null 2>&1; then\n    log "ERROR: No internet connection"\n    exit 1\nfi\n\n# \u57F7\u884C\u540C\u6B65\nif rclone sync "$KYWK_HOME/obsidian" "$DBX_REMOTE:/obsidian" \\\n    --exclude-from="$KYWK_HOME/Obsidian/.rcloneignore" \\\n    $RCLONE_CONF; then\n    log "Sync completed successfully"\nelse\n    log "ERROR: Sync failed"\n    exit 1\nfi\n'})}),"\n",(0,r.jsx)(n.h3,{id:"crontab-\u8A2D\u5B9A",children:"Crontab \u8A2D\u5B9A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u6BCF\u5C0F\u6642\u540C\u6B65\u4E00\u6B21\n0 * * * * /path/to/sync-obsidian.sh >> /var/log/rclone-sync.log 2>&1\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{className:"internal new",href:"/moco/utilities/cli/rclone-ignore/",children:"Rclone Ignore"})," - Rclone \u6A94\u6848\u904E\u6FFE\u8A2D\u5B9A"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{className:"internal new",href:"/moco/utilities/cli/awesome-cli/",children:"Awesome CLI"})," - \u73FE\u4EE3\u5316 CLI \u5DE5\u5177\u96C6\u5408"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://rclone.org/docs/",children:"Rclone Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://rclone.org/dropbox/",children:"Dropbox Backend"})}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},84429:function(e,n,l){l.d(n,{R:()=>c,x:()=>o});var i=l(96540);let r={},s=i.createContext(r);function c(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);