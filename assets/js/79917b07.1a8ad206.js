"use strict";(self.webpackChunkkywk_me=self.webpackChunkkywk_me||[]).push([["17230"],{51071:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>a,toc:()=>h,default:()=>d,metadata:()=>i,assets:()=>o,contentTitle:()=>t});var i=JSON.parse('{"id":"utilities/CLI/SSH Config","title":"SSH key & config","description":"SSH key & config","source":"@site/moco/utilities/CLI/SSH Config.md","sourceDirName":"utilities/CLI","slug":"/utilities/cli/ssh-config/","permalink":"/moco/utilities/cli/ssh-config/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"CLI","permalink":"/moco/tags/cli"},{"inline":true,"label":"Git","permalink":"/moco/tags/git"}],"version":"current","sidebarPosition":50,"frontMatter":{"title":"SSH key & config","description":"SSH key & config","tags":["CLI","Git"],"sidebar_position":50,"hide_table_of_contents":true,"date_created":"2023-01-02T09:31:07.000Z","image":"https://i.imgur.com/mErPwqL.png","slug":"/utilities/cli/ssh-config/"},"sidebar":"tutorialSidebar","previous":{"title":"IP/Port usage","permalink":"/moco/utilities/cli/check-port-usage/"},"next":{"title":"Tar \u52A0\u5BC6\u6253\u5305","permalink":"/moco/utilities/cli/tar-encrypt-tarball/"}}'),l=s(74848),r=s(84429);let a={title:"SSH key & config",description:"SSH key & config",tags:["CLI","Git"],sidebar_position:50,hide_table_of_contents:!0,date_created:new Date("2023-01-02T09:31:07.000Z"),image:"https://i.imgur.com/mErPwqL.png",slug:"/utilities/cli/ssh-config/"},t="SSH \u914D\u7F6E\u8207\u91D1\u9470\u7BA1\u7406",o={},h=[{value:"SSH Config \u57FA\u790E",id:"ssh-config-\u57FA\u790E",level:2},{value:"\u914D\u7F6E\u6A94\u6848\u4F4D\u7F6E",id:"\u914D\u7F6E\u6A94\u6848\u4F4D\u7F6E",level:3},{value:"\u57FA\u672C\u8A9E\u6CD5",id:"\u57FA\u672C\u8A9E\u6CD5",level:3},{value:"\u9023\u7DDA\u7C21\u5316\u6548\u679C",id:"\u9023\u7DDA\u7C21\u5316\u6548\u679C",level:3},{value:"\u5BE6\u7528\u914D\u7F6E\u7BC4\u4F8B",id:"\u5BE6\u7528\u914D\u7F6E\u7BC4\u4F8B",level:2},{value:"\u57FA\u672C\u4F3A\u670D\u5668\u914D\u7F6E",id:"\u57FA\u672C\u4F3A\u670D\u5668\u914D\u7F6E",level:3},{value:"\u8DF3\u677F\u6A5F\u914D\u7F6E",id:"\u8DF3\u677F\u6A5F\u914D\u7F6E",level:3},{value:"\u842C\u7528\u5B57\u5143\u914D\u7F6E",id:"\u842C\u7528\u5B57\u5143\u914D\u7F6E",level:3},{value:"GitHub \u591A\u5E33\u865F\u7BA1\u7406",id:"github-\u591A\u5E33\u865F\u7BA1\u7406",level:2},{value:"\u554F\u984C\u80CC\u666F",id:"\u554F\u984C\u80CC\u666F",level:3},{value:"\u89E3\u6C7A\u65B9\u6848",id:"\u89E3\u6C7A\u65B9\u6848",level:3},{value:"1. \u5EFA\u7ACB\u591A\u500B SSH \u91D1\u9470",id:"1-\u5EFA\u7ACB\u591A\u500B-ssh-\u91D1\u9470",level:4},{value:"2. \u914D\u7F6E SSH Config",id:"2-\u914D\u7F6E-ssh-config",level:4},{value:"3. \u4FEE\u6539 Git Remote URL",id:"3-\u4FEE\u6539-git-remote-url",level:4},{value:"4. \u6E2C\u8A66\u9023\u7DDA",id:"4-\u6E2C\u8A66\u9023\u7DDA",level:4},{value:"\u9032\u968E\u914D\u7F6E\u9078\u9805",id:"\u9032\u968E\u914D\u7F6E\u9078\u9805",level:2},{value:"\u5B89\u5168\u6027\u8A2D\u5B9A",id:"\u5B89\u5168\u6027\u8A2D\u5B9A",level:3},{value:"\u6548\u80FD\u6700\u4F73\u5316",id:"\u6548\u80FD\u6700\u4F73\u5316",level:3},{value:"\u57E0\u8F49\u767C\u8A2D\u5B9A",id:"\u57E0\u8F49\u767C\u8A2D\u5B9A",level:3},{value:"SSH \u91D1\u9470\u7BA1\u7406",id:"ssh-\u91D1\u9470\u7BA1\u7406",level:2},{value:"\u91D1\u9470\u985E\u578B\u9078\u64C7",id:"\u91D1\u9470\u985E\u578B\u9078\u64C7",level:3},{value:"\u91D1\u9470\u5B89\u5168\u7BA1\u7406",id:"\u91D1\u9470\u5B89\u5168\u7BA1\u7406",level:3},{value:"\u91D1\u9470\u5BC6\u78BC\u4FDD\u8B77",id:"\u91D1\u9470\u5BC6\u78BC\u4FDD\u8B77",level:3},{value:"\u5BE6\u7528\u6280\u5DE7",id:"\u5BE6\u7528\u6280\u5DE7",level:2},{value:"\u9023\u7DDA\u8A3A\u65B7",id:"\u9023\u7DDA\u8A3A\u65B7",level:3},{value:"\u6279\u6B21\u64CD\u4F5C",id:"\u6279\u6B21\u64CD\u4F5C",level:3},{value:"\u6A94\u6848\u50B3\u8F38\u6700\u4F73\u5316",id:"\u6A94\u6848\u50B3\u8F38\u6700\u4F73\u5316",level:3},{value:"\u5B89\u5168\u6700\u4F73\u5BE6\u8E10",id:"\u5B89\u5168\u6700\u4F73\u5BE6\u8E10",level:2},{value:"1. \u91D1\u9470\u7BA1\u7406",id:"1-\u91D1\u9470\u7BA1\u7406",level:3},{value:"2. \u914D\u7F6E\u5B89\u5168",id:"2-\u914D\u7F6E\u5B89\u5168",level:3},{value:"3. \u76E3\u63A7\u8207\u7A3D\u6838",id:"3-\u76E3\u63A7\u8207\u7A3D\u6838",level:3},{value:"\u7591\u96E3\u6392\u89E3",id:"\u7591\u96E3\u6392\u89E3",level:2},{value:"\u5E38\u898B\u554F\u984C",id:"\u5E38\u898B\u554F\u984C",level:3},{value:"\u9023\u7DDA\u554F\u984C\u8A3A\u65B7",id:"\u9023\u7DDA\u554F\u984C\u8A3A\u65B7",level:3},{value:"See Also",id:"see-also",level:2},{value:"See Also",id:"see-also-1",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"ssh-\u914D\u7F6E\u8207\u91D1\u9470\u7BA1\u7406",children:"SSH \u914D\u7F6E\u8207\u91D1\u9470\u7BA1\u7406"})}),"\n",(0,l.jsx)(n.p,{children:"SSH \u914D\u7F6E\u6A94\u6848\u53EF\u4EE5\u5927\u5E45\u7C21\u5316 SSH \u9023\u7DDA\u6307\u4EE4\uFF0C\u63D0\u5347\u958B\u767C\u6548\u7387\uFF0C\u7279\u5225\u9069\u5408\u7BA1\u7406\u591A\u500B\u4F3A\u670D\u5668\u548C Git \u5E33\u865F\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"ssh-config-\u57FA\u790E",children:"SSH Config \u57FA\u790E"}),"\n",(0,l.jsx)(n.h3,{id:"\u914D\u7F6E\u6A94\u6848\u4F4D\u7F6E",children:"\u914D\u7F6E\u6A94\u6848\u4F4D\u7F6E"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4F7F\u7528\u8005\u914D\u7F6E\u6A94\u6848\n~/.ssh/config\n\n# \u7CFB\u7D71\u5168\u57DF\u914D\u7F6E\u6A94\u6848\n/etc/ssh/ssh_config\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u57FA\u672C\u8A9E\u6CD5",children:"\u57FA\u672C\u8A9E\u6CD5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"Host alias-name                          # \u7528\u4F86\u9023\u7DDA\u7684 alias \u540D\u7A31\n    HostName server.name                 # host domain \u6216 ip\n    Port 22                              # SSH \u9023\u63A5\u57E0 (\u9810\u8A2D 22)\n    User username                        # \u767B\u5165\u4F7F\u7528\u8005\u540D\u7A31\n    IdentitiesOnly yes                   # \u53EA\u4F7F\u7528\u6307\u5B9A\u7684\u91D1\u9470\n    IdentityFile ~/.ssh/private_key      # \u6307\u5B9A\u79C1\u9470\u8DEF\u5F91\n    ForwardX11 yes                       # \u555F\u7528 X11 \u8F49\u767C (GUI \u61C9\u7528)\n    ServerAliveInterval 60               # \u4FDD\u6301\u9023\u7DDA\u9593\u9694\n    ServerAliveCountMax 3                # \u6700\u5927\u91CD\u8A66\u6B21\u6578\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u9023\u7DDA\u7C21\u5316\u6548\u679C",children:"\u9023\u7DDA\u7C21\u5316\u6548\u679C"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u539F\u59CB\u8907\u96DC\u6307\u4EE4\nssh user@hostname.domain.name -p 2222 -i ~/.ssh/custom_key\n\n# \u7C21\u5316\u5F8C\u6307\u4EE4\nssh alias-name\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5BE6\u7528\u914D\u7F6E\u7BC4\u4F8B",children:"\u5BE6\u7528\u914D\u7F6E\u7BC4\u4F8B"}),"\n",(0,l.jsx)(n.h3,{id:"\u57FA\u672C\u4F3A\u670D\u5668\u914D\u7F6E",children:"\u57FA\u672C\u4F3A\u670D\u5668\u914D\u7F6E"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"# \u958B\u767C\u4F3A\u670D\u5668\nHost dev-server\n    HostName dev.example.com\n    User developer\n    Port 2222\n    IdentityFile ~/.ssh/dev_server_key\n\n# \u751F\u7522\u4F3A\u670D\u5668\nHost prod-server\n    HostName prod.example.com\n    User admin\n    IdentityFile ~/.ssh/prod_server_key\n    StrictHostKeyChecking yes\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u8DF3\u677F\u6A5F\u914D\u7F6E",children:"\u8DF3\u677F\u6A5F\u914D\u7F6E"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"# \u8DF3\u677F\u6A5F\nHost bastion\n    HostName bastion.company.com\n    User jump-user\n    IdentityFile ~/.ssh/bastion_key\n\n# \u900F\u904E\u8DF3\u677F\u6A5F\u9023\u63A5\u5167\u7DB2\u4F3A\u670D\u5668\nHost internal-server\n    HostName 192.168.1.100\n    User admin\n    ProxyJump bastion\n    IdentityFile ~/.ssh/internal_key\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u842C\u7528\u5B57\u5143\u914D\u7F6E",children:"\u842C\u7528\u5B57\u5143\u914D\u7F6E"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"# \u6240\u6709 .dev \u7DB2\u57DF\u4F7F\u7528\u76F8\u540C\u8A2D\u5B9A\nHost *.dev\n    User developer\n    IdentityFile ~/.ssh/dev_key\n    StrictHostKeyChecking no\n\n# \u6240\u6709 AWS EC2 \u5BE6\u4F8B\nHost ec2-*\n    User ec2-user\n    IdentityFile ~/.ssh/aws_key.pem\n    StrictHostKeyChecking no\n"})}),"\n",(0,l.jsx)(n.h2,{id:"github-\u591A\u5E33\u865F\u7BA1\u7406",children:"GitHub \u591A\u5E33\u865F\u7BA1\u7406"}),"\n",(0,l.jsx)(n.h3,{id:"\u554F\u984C\u80CC\u666F",children:"\u554F\u984C\u80CC\u666F"}),"\n",(0,l.jsx)(n.p,{children:"\u900F\u904E CLI \u5B58\u53D6 GitHub repository \u6642\uFF0C\u82E5\u9700\u8981\u4F7F\u7528\u4E0D\u540C\u5E33\u865F\uFF0CGitHub \u4E0D\u5141\u8A31\u4F7F\u7528\u76F8\u540C\u7684 SSH \u91D1\u9470\u3002\u5FC5\u9808\u70BA\u6BCF\u500B\u5E33\u865F\u5EFA\u7ACB\u7368\u7ACB\u7684 SSH \u91D1\u9470\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u89E3\u6C7A\u65B9\u6848",children:"\u89E3\u6C7A\u65B9\u6848"}),"\n",(0,l.jsx)(n.h4,{id:"1-\u5EFA\u7ACB\u591A\u500B-ssh-\u91D1\u9470",children:"1. \u5EFA\u7ACB\u591A\u500B SSH \u91D1\u9470"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u500B\u4EBA\u5E33\u865F\u91D1\u9470\nssh-keygen -t ed25519 -C "personal@email.com" -f ~/.ssh/github_personal\n\n# \u5DE5\u4F5C\u5E33\u865F\u91D1\u9470\nssh-keygen -t ed25519 -C "work@company.com" -f ~/.ssh/github_work\n'})}),"\n",(0,l.jsx)(n.h4,{id:"2-\u914D\u7F6E-ssh-config",children:"2. \u914D\u7F6E SSH Config"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"# \u500B\u4EBA GitHub \u5E33\u865F\nHost github-personal\n    HostName github.com\n    User git\n    IdentityFile ~/.ssh/github_personal\n    IdentitiesOnly yes\n\n# \u5DE5\u4F5C GitHub \u5E33\u865F\nHost github-work\n    HostName github.com\n    User git\n    IdentityFile ~/.ssh/github_work\n    IdentitiesOnly yes\n"})}),"\n",(0,l.jsx)(n.h4,{id:"3-\u4FEE\u6539-git-remote-url",children:"3. \u4FEE\u6539 Git Remote URL"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u500B\u4EBA\u5C08\u6848\ngit remote set-url origin git@github-personal:username/personal-repo.git\n\n# \u5DE5\u4F5C\u5C08\u6848\ngit remote set-url origin git@github-work:company/work-repo.git\n"})}),"\n",(0,l.jsx)(n.h4,{id:"4-\u6E2C\u8A66\u9023\u7DDA",children:"4. \u6E2C\u8A66\u9023\u7DDA"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u6E2C\u8A66\u500B\u4EBA\u5E33\u865F\nssh -T github-personal\n\n# \u6E2C\u8A66\u5DE5\u4F5C\u5E33\u865F\nssh -T github-work\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u9032\u968E\u914D\u7F6E\u9078\u9805",children:"\u9032\u968E\u914D\u7F6E\u9078\u9805"}),"\n",(0,l.jsx)(n.h3,{id:"\u5B89\u5168\u6027\u8A2D\u5B9A",children:"\u5B89\u5168\u6027\u8A2D\u5B9A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"Host secure-server\n    HostName secure.example.com\n    User admin\n    IdentityFile ~/.ssh/secure_key\n\n    # \u5B89\u5168\u6027\u9078\u9805\n    StrictHostKeyChecking yes\n    VerifyHostKeyDNS yes\n    HashKnownHosts yes\n\n    # \u52A0\u5BC6\u9078\u9805\n    Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com\n    MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\n    KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group16-sha512\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6548\u80FD\u6700\u4F73\u5316",children:"\u6548\u80FD\u6700\u4F73\u5316"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"Host fast-server\n    HostName fast.example.com\n    User speeduser\n\n    # \u9023\u7DDA\u6700\u4F73\u5316\n    Compression yes\n    ServerAliveInterval 60\n    ServerAliveCountMax 3\n    TCPKeepAlive yes\n\n    # \u9023\u7DDA\u91CD\u7528\n    ControlMaster auto\n    ControlPath ~/.ssh/sockets/%r@%h-%p\n    ControlPersist 600\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u57E0\u8F49\u767C\u8A2D\u5B9A",children:"\u57E0\u8F49\u767C\u8A2D\u5B9A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"Host tunnel-server\n    HostName tunnel.example.com\n    User tunneluser\n\n    # \u672C\u5730\u57E0\u8F49\u767C (\u5C07\u672C\u5730 8080 \u8F49\u767C\u5230\u9060\u7AEF 80)\n    LocalForward 8080 localhost:80\n\n    # \u9060\u7AEF\u57E0\u8F49\u767C (\u5C07\u9060\u7AEF 9000 \u8F49\u767C\u5230\u672C\u5730 3000)\n    RemoteForward 9000 localhost:3000\n\n    # \u52D5\u614B\u57E0\u8F49\u767C (SOCKS \u4EE3\u7406)\n    DynamicForward 1080\n"})}),"\n",(0,l.jsx)(n.h2,{id:"ssh-\u91D1\u9470\u7BA1\u7406",children:"SSH \u91D1\u9470\u7BA1\u7406"}),"\n",(0,l.jsx)(n.h3,{id:"\u91D1\u9470\u985E\u578B\u9078\u64C7",children:"\u91D1\u9470\u985E\u578B\u9078\u64C7"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Ed25519 (\u63A8\u85A6\uFF0C\u5B89\u5168\u4E14\u5FEB\u901F)\nssh-keygen -t ed25519 -C "your-email@example.com"\n\n# RSA 4096 \u4F4D\u5143 (\u76F8\u5BB9\u6027\u597D)\nssh-keygen -t rsa -b 4096 -C "your-email@example.com"\n\n# ECDSA (\u8F03\u65B0\u7684\u6A62\u5713\u66F2\u7DDA)\nssh-keygen -t ecdsa -b 521 -C "your-email@example.com"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u91D1\u9470\u5B89\u5168\u7BA1\u7406",children:"\u91D1\u9470\u5B89\u5168\u7BA1\u7406"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u8A2D\u5B9A\u91D1\u9470\u6A94\u6848\u6B0A\u9650\nchmod 600 ~/.ssh/private_key\nchmod 644 ~/.ssh/private_key.pub\nchmod 700 ~/.ssh\n\n# \u4F7F\u7528 ssh-agent \u7BA1\u7406\u91D1\u9470\nssh-add ~/.ssh/private_key\n\n# \u5217\u51FA\u5DF2\u8F09\u5165\u7684\u91D1\u9470\nssh-add -l\n\n# \u79FB\u9664\u6240\u6709\u91D1\u9470\nssh-add -D\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u91D1\u9470\u5BC6\u78BC\u4FDD\u8B77",children:"\u91D1\u9470\u5BC6\u78BC\u4FDD\u8B77"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u5EFA\u7ACB\u6709\u5BC6\u78BC\u4FDD\u8B77\u7684\u91D1\u9470\nssh-keygen -t ed25519 -C "secure-key@example.com" -f ~/.ssh/secure_key\n\n# \u4FEE\u6539\u73FE\u6709\u91D1\u9470\u5BC6\u78BC\nssh-keygen -p -f ~/.ssh/existing_key\n\n# \u79FB\u9664\u91D1\u9470\u5BC6\u78BC\nssh-keygen -p -f ~/.ssh/existing_key -N ""\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u5BE6\u7528\u6280\u5DE7",children:"\u5BE6\u7528\u6280\u5DE7"}),"\n",(0,l.jsx)(n.h3,{id:"\u9023\u7DDA\u8A3A\u65B7",children:"\u9023\u7DDA\u8A3A\u65B7"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u8A73\u7D30\u9023\u7DDA\u8CC7\u8A0A\nssh -v username@hostname\n\n# \u66F4\u8A73\u7D30\u7684\u9664\u932F\u8CC7\u8A0A\nssh -vvv username@hostname\n\n# \u6E2C\u8A66\u914D\u7F6E\u6A94\u6848\nssh -F ~/.ssh/config -T git@github.com\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6279\u6B21\u64CD\u4F5C",children:"\u6279\u6B21\u64CD\u4F5C"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u5728\u591A\u53F0\u4F3A\u670D\u5668\u57F7\u884C\u76F8\u540C\u6307\u4EE4\nfor host in server1 server2 server3; do\n    ssh $host "uptime"\ndone\n\n# \u4F7F\u7528 parallel-ssh\nparallel-ssh -h hosts.txt "df -h"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6A94\u6848\u50B3\u8F38\u6700\u4F73\u5316",children:"\u6A94\u6848\u50B3\u8F38\u6700\u4F73\u5316"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"Host file-server\n    HostName files.example.com\n    User fileuser\n\n    # \u6A94\u6848\u50B3\u8F38\u6700\u4F73\u5316\n    Compression yes\n    CompressionLevel 6\n\n    # \u5927\u6A94\u6848\u50B3\u8F38\n    ServerAliveInterval 30\n    ServerAliveCountMax 6\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5B89\u5168\u6700\u4F73\u5BE6\u8E10",children:"\u5B89\u5168\u6700\u4F73\u5BE6\u8E10"}),"\n",(0,l.jsx)(n.h3,{id:"1-\u91D1\u9470\u7BA1\u7406",children:"1. \u91D1\u9470\u7BA1\u7406"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5B9A\u671F\u8F2A\u63DB SSH \u91D1\u9470"}),"\n",(0,l.jsx)(n.li,{children:"\u4F7F\u7528\u5F37\u5BC6\u78BC\u4FDD\u8B77\u79C1\u9470"}),"\n",(0,l.jsx)(n.li,{children:"\u4E0D\u540C\u670D\u52D9\u4F7F\u7528\u4E0D\u540C\u91D1\u9470"}),"\n",(0,l.jsx)(n.li,{children:"\u5099\u4EFD\u91CD\u8981\u91D1\u9470"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2-\u914D\u7F6E\u5B89\u5168",children:"2. \u914D\u7F6E\u5B89\u5168"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ssh_config",children:"# \u5168\u57DF\u5B89\u5168\u8A2D\u5B9A\nHost *\n    # \u7981\u7528\u4E0D\u5B89\u5168\u7684\u8A8D\u8B49\u65B9\u5F0F\n    PasswordAuthentication no\n    ChallengeResponseAuthentication no\n\n    # \u4F7F\u7528\u5B89\u5168\u7684\u52A0\u5BC6\u6F14\u7B97\u6CD5\n    Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com\n\n    # \u56B4\u683C\u4E3B\u6A5F\u91D1\u9470\u6AA2\u67E5\n    StrictHostKeyChecking ask\n\n    # \u96DC\u6E4A\u5DF2\u77E5\u4E3B\u6A5F\n    HashKnownHosts yes\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-\u76E3\u63A7\u8207\u7A3D\u6838",children:"3. \u76E3\u63A7\u8207\u7A3D\u6838"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u6AA2\u67E5 SSH \u9023\u7DDA\u65E5\u8A8C\nsudo tail -f /var/log/auth.log | grep ssh\n\n# \u6AA2\u67E5\u5931\u6557\u7684\u767B\u5165\u5617\u8A66\nsudo grep "Failed password" /var/log/auth.log\n\n# \u6AA2\u67E5\u6210\u529F\u7684\u767B\u5165\nsudo grep "Accepted" /var/log/auth.log\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u7591\u96E3\u6392\u89E3",children:"\u7591\u96E3\u6392\u89E3"}),"\n",(0,l.jsx)(n.h3,{id:"\u5E38\u898B\u554F\u984C",children:"\u5E38\u898B\u554F\u984C"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u6B0A\u9650\u554F\u984C\nchmod 700 ~/.ssh\nchmod 600 ~/.ssh/config\nchmod 600 ~/.ssh/id_*\nchmod 644 ~/.ssh/id_*.pub\n\n# \u6E05\u9664\u5DF2\u77E5\u4E3B\u6A5F\nssh-keygen -R hostname\n\n# \u91CD\u65B0\u7522\u751F\u4E3B\u6A5F\u91D1\u9470\nsudo ssh-keygen -A\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u9023\u7DDA\u554F\u984C\u8A3A\u65B7",children:"\u9023\u7DDA\u554F\u984C\u8A3A\u65B7"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u6AA2\u67E5 SSH \u670D\u52D9\u72C0\u614B\nsudo systemctl status ssh\n\n# \u6AA2\u67E5\u9632\u706B\u7246\u8A2D\u5B9A\nsudo ufw status\nsudo iptables -L\n\n# \u6AA2\u67E5 DNS \u89E3\u6790\nnslookup hostname\ndig hostname\n"})}),"\n",(0,l.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{className:"internal new",href:"/moco/utilities/cli/direnv-gitconfig/",children:"direnv gitconfig"})," - \u7D50\u5408 direnv \u7684 Git \u914D\u7F6E\u7BA1\u7406"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{className:"internal new",href:"/moco/utilities/cli/awesome-cli/",children:"Awesome CLI"})," - \u73FE\u4EE3\u5316 CLI \u5DE5\u5177\u96C6\u5408"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://man.openbsd.org/ssh_config",children:"SSH Config \u5B98\u65B9\u6587\u6A94"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh",children:"GitHub SSH \u8A2D\u5B9A\u6307\u5357"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"see-also-1",children:"See Also"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://chusiang.gitbooks.io/working-on-gnu-linux/content/20.ssh_config.html",children:"\u589E\u9032 SSH \u4F7F\u7528\u6548\u7387 - ssh_config \xb7 \u5B8C\u5168\u7528 GNU/Linux \u5DE5\u4F5C"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://medium.com/%E6%B5%A6%E5%B3%B6%E5%A4%AA%E9%83%8E%E7%9A%84%E6%B0%B4%E6%97%8F%E7%BC%B8/how-to-setup-ssh-config-%E4%BD%BF%E7%94%A8-ssh-%E8%A8%AD%E5%AE%9A%E6%AA%94-74ad46f99818",children:"How to setup SSH config \uFF1A\u4F7F\u7528 SSH \u8A2D\u5B9A\u6A94\u7C21\u5316\u6307\u4EE4\u8207\u9023\u7DDA\u7DB2\u5740 | by awonwon | \u6D66\u5CF6\u592A\u90CE\u7684\u6C34\u65CF\u7F38 | Medium"})}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},84429:function(e,n,s){s.d(n,{R:()=>a,x:()=>t});var i=s(96540);let l={},r=i.createContext(l);function a(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);