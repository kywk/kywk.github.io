"use strict";(self.webpackChunkkywk_me=self.webpackChunkkywk_me||[]).push([["60247"],{93659:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>r,toc:()=>l,default:()=>d,metadata:()=>a,assets:()=>c,contentTitle:()=>t});var a=JSON.parse('{"id":"javascript/package/Axios Snippets","title":"Axios Snippets","description":"Node.js: Axios \u5E38\u7528\u7A0B\u5F0F\u78BC\u7247\u6BB5\u8207\u4F7F\u7528\u6280\u5DE7","source":"@site/moco/javascript/package/Axios Snippets.md","sourceDirName":"javascript/package","slug":"/javascript/package/axios-snippets/","permalink":"/moco/javascript/package/axios-snippets/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Node.js","permalink":"/moco/tags/node-js"},{"inline":true,"label":"Nodejs/Axios","permalink":"/moco/tags/nodejs-axios"},{"inline":true,"label":"HTTP","permalink":"/moco/tags/http"}],"version":"current","sidebarPosition":60,"frontMatter":{"title":"Axios Snippets","description":"Node.js: Axios \u5E38\u7528\u7A0B\u5F0F\u78BC\u7247\u6BB5\u8207\u4F7F\u7528\u6280\u5DE7","tags":["Node.js","Nodejs/Axios","HTTP"],"sidebar_position":60,"hide_table_of_contents":false,"date_created":"2023-01-07T00:00:00.000Z","image":"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0","slug":"/javascript/package/axios-snippets/"},"sidebar":"tutorialSidebar","previous":{"title":"TypeScript","permalink":"/moco/javascript/express/express-typescript/"},"next":{"title":"Sequelize: Seeds","permalink":"/moco/javascript/package/sequelize-migration-seeds/"}}'),o=s(74848),i=s(84429);let r={title:"Axios Snippets",description:"Node.js: Axios \u5E38\u7528\u7A0B\u5F0F\u78BC\u7247\u6BB5\u8207\u4F7F\u7528\u6280\u5DE7",tags:["Node.js","Nodejs/Axios","HTTP"],sidebar_position:60,hide_table_of_contents:!1,date_created:new Date("2023-01-07T00:00:00.000Z"),image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0",slug:"/javascript/package/axios-snippets/"},t="[Node.js] Axios Snippets",c={},l=[{value:"\u57FA\u672C\u4F7F\u7528",id:"\u57FA\u672C\u4F7F\u7528",level:2},{value:"\u5B89\u88DD",id:"\u5B89\u88DD",level:3},{value:"GET \u8ACB\u6C42",id:"get-\u8ACB\u6C42",level:3},{value:"POST \u8ACB\u6C42",id:"post-\u8ACB\u6C42",level:3},{value:"\u9032\u968E\u6280\u5DE7",id:"\u9032\u968E\u6280\u5DE7",level:2},{value:"x-www-form-urlencoded \u683C\u5F0F",id:"x-www-form-urlencoded-\u683C\u5F0F",level:3},{value:"\u651C\u5E36 Cookie",id:"\u651C\u5E36-cookie",level:3},{value:"\u8655\u7406 302 \u91CD\u5B9A\u5411",id:"\u8655\u7406-302-\u91CD\u5B9A\u5411",level:3},{value:"\u8A2D\u5B9A\u8ACB\u6C42\u8D85\u6642",id:"\u8A2D\u5B9A\u8ACB\u6C42\u8D85\u6642",level:3},{value:"\u6514\u622A\u5668 (Interceptors)",id:"\u6514\u622A\u5668-interceptors",level:3},{value:"\u5EFA\u7ACB\u5BE6\u4F8B",id:"\u5EFA\u7ACB\u5BE6\u4F8B",level:3},{value:"See Also",id:"see-also",level:2},{value:"\u5B98\u65B9\u6587\u4EF6",id:"\u5B98\u65B9\u6587\u4EF6",level:3},{value:"\u53C3\u8003\u8CC7\u6E90",id:"\u53C3\u8003\u8CC7\u6E90",level:3}];function p(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"nodejs-axios-snippets",children:"[Node.js] Axios Snippets"})}),"\n",(0,o.jsx)(n.p,{children:"Axios \u662F\u4E00\u500B\u57FA\u65BC Promise \u7684 HTTP \u5BA2\u6236\u7AEF\uFF0C\u9069\u7528\u65BC\u700F\u89BD\u5668\u548C Node.js \u74B0\u5883\u3002\n\u672C\u6587\u6574\u7406\u5E38\u7528\u7684 Axios \u7A0B\u5F0F\u78BC\u7247\u6BB5\u8207\u4F7F\u7528\u6280\u5DE7\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"\u57FA\u672C\u4F7F\u7528",children:"\u57FA\u672C\u4F7F\u7528"}),"\n",(0,o.jsx)(n.h3,{id:"\u5B89\u88DD",children:"\u5B89\u88DD"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install axios\n"})}),"\n",(0,o.jsx)(n.h3,{id:"get-\u8ACB\u6C42",children:"GET \u8ACB\u6C42"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const axios = require("axios");\n\n// \u57FA\u672C GET \u8ACB\u6C42\naxios\n  .get("https://api.example.com/data")\n  .then((response) => {\n    console.log(response.data);\n  })\n  .catch((error) => {\n    console.error(error);\n  });\n\n// \u5E36\u53C3\u6578\u7684 GET \u8ACB\u6C42\naxios\n  .get("https://api.example.com/data", {\n    params: {\n      id: 123,\n      name: "example",\n    },\n  })\n  .then((response) => console.log(response.data))\n  .catch((error) => console.error(error));\n'})}),"\n",(0,o.jsx)(n.h3,{id:"post-\u8ACB\u6C42",children:"POST \u8ACB\u6C42"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// JSON \u683C\u5F0F POST\naxios\n  .post("https://api.example.com/data", {\n    name: "John",\n    email: "john@example.com",\n  })\n  .then((response) => console.log(response.data))\n  .catch((error) => console.error(error));\n\n// \u4F7F\u7528 async/await\nasync function postData() {\n  try {\n    const response = await axios.post("https://api.example.com/data", {\n      name: "John",\n      email: "john@example.com",\n    });\n    console.log(response.data);\n  } catch (error) {\n    console.error(error);\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u9032\u968E\u6280\u5DE7",children:"\u9032\u968E\u6280\u5DE7"}),"\n",(0,o.jsx)(n.h3,{id:"x-www-form-urlencoded-\u683C\u5F0F",children:"x-www-form-urlencoded \u683C\u5F0F"}),"\n",(0,o.jsxs)(n.p,{children:["\u8655\u7406 ",(0,o.jsx)(n.code,{children:"application/x-www-form-urlencoded"})," \u683C\u5F0F\u7684\u8ACB\u6C42\uFF1A"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const qs = require("qs");\n\naxios.post(\n  "https://api.example.com/data",\n  qs.stringify({\n    name: "John",\n    email: "john@example.com",\n  }),\n  {\n    headers: {\n      "Content-Type": "application/x-www-form-urlencoded",\n    },\n  },\n);\n'})}),"\n",(0,o.jsx)(n.p,{children:"\u6216\u4F7F\u7528 URLSearchParams\uFF1A"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const params = new URLSearchParams();\nparams.append("name", "John");\nparams.append("email", "john@example.com");\n\naxios.post("https://api.example.com/data", params);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u651C\u5E36-cookie",children:"\u651C\u5E36 Cookie"}),"\n",(0,o.jsx)(n.p,{children:"\u8B93\u8ACB\u6C42\u81EA\u52D5\u651C\u5E36 Cookie\uFF1A"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'axios.get("https://api.example.com/data", {\n  withCredentials: true,\n});\n\n// \u6216\u8A2D\u5B9A\u5168\u57DF\u914D\u7F6E\naxios.defaults.withCredentials = true;\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u8655\u7406-302-\u91CD\u5B9A\u5411",children:"\u8655\u7406 302 \u91CD\u5B9A\u5411"}),"\n",(0,o.jsx)(n.p,{children:"Axios \u9810\u8A2D\u6703\u81EA\u52D5\u8DDF\u96A8\u91CD\u5B9A\u5411\uFF0C\u4F46\u5728\u67D0\u4E9B\u60C5\u6CC1\u4E0B\u53EF\u80FD\u9700\u8981\u624B\u52D5\u8655\u7406\uFF1A"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'axios\n  .get("https://api.example.com/data", {\n    maxRedirects: 0, // \u4E0D\u81EA\u52D5\u8DDF\u96A8\u91CD\u5B9A\u5411\n    validateStatus: function (status) {\n      return status >= 200 && status < 400; // \u63A5\u53D7 3xx \u72C0\u614B\u78BC\n    },\n  })\n  .then((response) => {\n    if (response.status === 302) {\n      console.log("\u91CD\u5B9A\u5411\u5230:", response.headers.location);\n    }\n  })\n  .catch((error) => {\n    if (error.response && error.response.status === 302) {\n      console.log("\u6355\u7372\u5230 302 \u91CD\u5B9A\u5411");\n    }\n  });\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u8A2D\u5B9A\u8ACB\u6C42\u8D85\u6642",children:"\u8A2D\u5B9A\u8ACB\u6C42\u8D85\u6642"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'axios\n  .get("https://api.example.com/data", {\n    timeout: 5000, // 5 \u79D2\u8D85\u6642\n  })\n  .catch((error) => {\n    if (error.code === "ECONNABORTED") {\n      console.log("\u8ACB\u6C42\u8D85\u6642");\n    }\n  });\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u6514\u622A\u5668-interceptors",children:"\u6514\u622A\u5668 (Interceptors)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// \u8ACB\u6C42\u6514\u622A\u5668\naxios.interceptors.request.use(\n  (config) => {\n    // \u5728\u767C\u9001\u8ACB\u6C42\u524D\u505A\u4E9B\u4EC0\u9EBC\n    config.headers.Authorization = "Bearer " + token;\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  },\n);\n\n// \u97FF\u61C9\u6514\u622A\u5668\naxios.interceptors.response.use(\n  (response) => {\n    // \u5C0D\u97FF\u61C9\u6578\u64DA\u505A\u4E9B\u4EC0\u9EBC\n    return response;\n  },\n  (error) => {\n    // \u5C0D\u97FF\u61C9\u932F\u8AA4\u505A\u4E9B\u4EC0\u9EBC\n    if (error.response.status === 401) {\n      // \u8655\u7406\u672A\u6388\u6B0A\n    }\n    return Promise.reject(error);\n  },\n);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u5EFA\u7ACB\u5BE6\u4F8B",children:"\u5EFA\u7ACB\u5BE6\u4F8B"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const instance = axios.create({\n  baseURL: "https://api.example.com",\n  timeout: 5000,\n  headers: { "X-Custom-Header": "foobar" },\n});\n\ninstance.get("/data").then((response) => console.log(response.data));\n'})}),"\n",(0,o.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,o.jsx)(n.h3,{id:"\u5B98\u65B9\u6587\u4EF6",children:"\u5B98\u65B9\u6587\u4EF6"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://axios-http.com/",children:"Axios \u5B98\u65B9\u7DB2\u7AD9"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/axios/axios",children:"GitHub - axios/axios"})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"\u53C3\u8003\u8CC7\u6E90",children:"\u53C3\u8003\u8CC7\u6E90"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://ithelp.ithome.com.tw/articles/10253259",children:"JavaScript\u57FA\u672C\u529F\u4FEE\u7DF4\uFF1ADay29 - axios\u57FA\u672C\u8A9E\u6CD5\u8207\u7DF4\u7FD2(GET\u3001POST\u8ACB\u6C42)"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://jeremysu0131.github.io/axios-%E8%99%95%E7%90%86-x-www-form-urlencoded-%E6%A0%BC%E5%BC%8F%E5%95%8F%E9%A1%8C/",children:"[axios] \u8655\u7406 x-www-form-urlencoded \u683C\u5F0F\u554F\u984C | Nomi Su@Coding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://www.jianshu.com/p/0bc30d522244",children:"axios\u8B93\u8ACB\u6C42\u651C\u5E36cookie\u7684\u4E00\u4E9B\u5C0F\u554F\u984C"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://stackoverflow.com/questions/53480518/axios-go-in-catch-function-instead-of-then-if-status-is-302",children:"axios go in catch function instead of then, if status is 302 - Stack Overflow"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://xudany.github.io/axios/2020/07/14/%E9%97%9C%E6%96%BC-axios-302-%E9%87%8D%E5%AE%9A%E5%90%91%E7%9A%84%E5%95%8F%E9%A1%8C/",children:"\u95DC\u65BC axios 302 \u91CD\u5B9A\u5411\u7684\u554F\u984C"})}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},84429:function(e,n,s){s.d(n,{R:()=>r,x:()=>t});var a=s(96540);let o={},i=a.createContext(o);function r(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);