"use strict";(self.webpackChunkkywk_me=self.webpackChunkkywk_me||[]).push([["14950"],{45917:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>a,toc:()=>d,default:()=>o,metadata:()=>l,assets:()=>t,contentTitle:()=>i});var l=JSON.parse('{"id":"utilities/CLI/Tar Encrypt Tarball","title":"Tar \u52A0\u5BC6\u6253\u5305","description":"Tar \u52A0\u5BC6\u6253\u5305","source":"@site/moco/utilities/CLI/Tar Encrypt Tarball.md","sourceDirName":"utilities/CLI","slug":"/utilities/cli/tar-encrypt-tarball/","permalink":"/moco/utilities/cli/tar-encrypt-tarball/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"CLI","permalink":"/moco/tags/cli"}],"version":"current","sidebarPosition":50,"frontMatter":{"title":"Tar \u52A0\u5BC6\u6253\u5305","description":"Tar \u52A0\u5BC6\u6253\u5305","tags":["CLI"],"sidebar_position":50,"hide_table_of_contents":true,"date_created":"2020-12-10T00:00:00.000Z","image":"https://i.imgur.com/mErPwqL.png","slug":"/utilities/cli/tar-encrypt-tarball/"},"sidebar":"tutorialSidebar","previous":{"title":"SSH key & config","permalink":"/moco/utilities/cli/ssh-config/"},"next":{"title":"Rclone: Dropbox","permalink":"/moco/utilities/cli/rclone-dropbox/"}}'),r=s(74848),c=s(84429);let a={title:"Tar \u52A0\u5BC6\u6253\u5305",description:"Tar \u52A0\u5BC6\u6253\u5305",tags:["CLI"],sidebar_position:50,hide_table_of_contents:!0,date_created:new Date("2020-12-10T00:00:00.000Z"),image:"https://i.imgur.com/mErPwqL.png",slug:"/utilities/cli/tar-encrypt-tarball/"},i="Tar \u52A0\u5BC6\u6253\u5305",t={},d=[{value:"\u80CC\u666F\u8207\u9700\u6C42",id:"\u80CC\u666F\u8207\u9700\u6C42",level:2},{value:"\u96F2\u7AEF\u5132\u5B58\u5B89\u5168\u8003\u91CF",id:"\u96F2\u7AEF\u5132\u5B58\u5B89\u5168\u8003\u91CF",level:3},{value:"Tar \u7684\u9650\u5236",id:"tar-\u7684\u9650\u5236",level:3},{value:"\u57FA\u672C\u52A0\u5BC6\u6253\u5305",id:"\u57FA\u672C\u52A0\u5BC6\u6253\u5305",level:2},{value:"\u52A0\u5BC6\u8A9E\u6CD5",id:"\u52A0\u5BC6\u8A9E\u6CD5",level:3},{value:"\u53C3\u6578\u8AAA\u660E",id:"\u53C3\u6578\u8AAA\u660E",level:3},{value:"Tar \u53C3\u6578",id:"tar-\u53C3\u6578",level:4},{value:"OpenSSL \u53C3\u6578",id:"openssl-\u53C3\u6578",level:4},{value:"\u89E3\u5BC6\u8207\u9084\u539F",id:"\u89E3\u5BC6\u8207\u9084\u539F",level:2},{value:"\u89E3\u5BC6\u8A9E\u6CD5",id:"\u89E3\u5BC6\u8A9E\u6CD5",level:3},{value:"\u89E3\u5BC6\u53C3\u6578",id:"\u89E3\u5BC6\u53C3\u6578",level:3},{value:"\u9032\u968E\u52A0\u5BC6\u9078\u9805",id:"\u9032\u968E\u52A0\u5BC6\u9078\u9805",level:2},{value:"\u66F4\u5B89\u5168\u7684\u52A0\u5BC6\u6F14\u7B97\u6CD5",id:"\u66F4\u5B89\u5168\u7684\u52A0\u5BC6\u6F14\u7B97\u6CD5",level:3},{value:"\u4F7F\u7528\u91D1\u9470\u6A94\u6848",id:"\u4F7F\u7528\u91D1\u9470\u6A94\u6848",level:3},{value:"\u5BC6\u78BC\u63D0\u793A\u8F38\u5165",id:"\u5BC6\u78BC\u63D0\u793A\u8F38\u5165",level:3},{value:"\u5BE6\u7528\u8173\u672C\u8207 Alias",id:"\u5BE6\u7528\u8173\u672C\u8207-alias",level:2},{value:"\u57FA\u672C Alias \u8A2D\u5B9A",id:"\u57FA\u672C-alias-\u8A2D\u5B9A",level:3},{value:"\u9032\u968E\u52A0\u5BC6\u8173\u672C",id:"\u9032\u968E\u52A0\u5BC6\u8173\u672C",level:3},{value:"\u89E3\u5BC6\u8173\u672C",id:"\u89E3\u5BC6\u8173\u672C",level:3},{value:"\u6279\u6B21\u8655\u7406",id:"\u6279\u6B21\u8655\u7406",level:2},{value:"\u6279\u6B21\u52A0\u5BC6\u591A\u500B\u76EE\u9304",id:"\u6279\u6B21\u52A0\u5BC6\u591A\u500B\u76EE\u9304",level:3},{value:"\u5B9A\u6642\u5099\u4EFD\u8173\u672C",id:"\u5B9A\u6642\u5099\u4EFD\u8173\u672C",level:3},{value:"\u5B89\u5168\u6027\u8003\u91CF",id:"\u5B89\u5168\u6027\u8003\u91CF",level:2},{value:"\u5BC6\u78BC\u7BA1\u7406",id:"\u5BC6\u78BC\u7BA1\u7406",level:3},{value:"\u91D1\u9470\u5F37\u5EA6\u5EFA\u8B70",id:"\u91D1\u9470\u5F37\u5EA6\u5EFA\u8B70",level:3},{value:"\u6A94\u6848\u5B8C\u6574\u6027\u9A57\u8B49",id:"\u6A94\u6848\u5B8C\u6574\u6027\u9A57\u8B49",level:3},{value:"\u6548\u80FD\u6700\u4F73\u5316",id:"\u6548\u80FD\u6700\u4F73\u5316",level:2},{value:"\u58D3\u7E2E\u6F14\u7B97\u6CD5\u6BD4\u8F03",id:"\u58D3\u7E2E\u6F14\u7B97\u6CD5\u6BD4\u8F03",level:3},{value:"\u5927\u6A94\u6848\u8655\u7406",id:"\u5927\u6A94\u6848\u8655\u7406",level:3},{value:"\u7591\u96E3\u6392\u89E3",id:"\u7591\u96E3\u6392\u89E3",level:2},{value:"\u5E38\u898B\u932F\u8AA4",id:"\u5E38\u898B\u932F\u8AA4",level:3},{value:"\u9664\u932F\u6280\u5DE7",id:"\u9664\u932F\u6280\u5DE7",level:3},{value:"\u73FE\u4EE3\u5316\u66FF\u4EE3\u65B9\u6848",id:"\u73FE\u4EE3\u5316\u66FF\u4EE3\u65B9\u6848",level:2},{value:"\u4F7F\u7528 GPG",id:"\u4F7F\u7528-gpg",level:3},{value:"\u4F7F\u7528 7zip",id:"\u4F7F\u7528-7zip",level:3},{value:"See Also",id:"see-also",level:2},{value:"See Also",id:"see-also-1",level:2}];function h(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"tar-\u52A0\u5BC6\u6253\u5305",children:"Tar \u52A0\u5BC6\u6253\u5305"})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u96F2\u7AEF\u5132\u5B58\u6642\u4EE3\uFF0C\u6A94\u6848\u52A0\u5BC6\u8B8A\u5F97\u8D8A\u4F86\u8D8A\u91CD\u8981\u3002Tar \u7D50\u5408 OpenSSL \u63D0\u4F9B\u4E86\u4E00\u500B\u7C21\u55AE\u6709\u6548\u7684\u6A94\u6848\u52A0\u5BC6\u6253\u5305\u89E3\u6C7A\u65B9\u6848\uFF0C\u7279\u5225\u9069\u5408\u654F\u611F\u8CC7\u6599\u7684\u5099\u4EFD\u548C\u50B3\u8F38\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u80CC\u666F\u8207\u9700\u6C42",children:"\u80CC\u666F\u8207\u9700\u6C42"}),"\n",(0,r.jsx)(n.h3,{id:"\u96F2\u7AEF\u5132\u5B58\u5B89\u5168\u8003\u91CF",children:"\u96F2\u7AEF\u5132\u5B58\u5B89\u5168\u8003\u91CF"}),"\n",(0,r.jsx)(n.p,{children:"\u7DB2\u8DEF\u4E0A\u514D\u8CBB\u7684\u5718\u968A\u786C\u789F\u670D\u52D9\uFF0C\u96D6\u7136\u5275\u5EFA\u8005\u662F\u7BA1\u7406\u54E1\uFF0C\u4F46\u5BE6\u969B\u4E0A\u6240\u6709\u6A94\u6848\u4ECD\u53D7\u670D\u52D9\u63D0\u4F9B\u5546\u7684\u6A5F\u69CB\u7BA1\u7406\u54E1\u7BA1\u8F44\u3002\u7BA1\u7406\u54E1\u96D6\u7136\u7121\u6CD5\u76F4\u63A5\u5B58\u53D6\u6A94\u6848\uFF0C\u4F46\u6709\u6B0A\u5C07\u6A94\u6848\u64C1\u6709\u8005\u8F49\u79FB\u7D66\u4ED6\u4EBA\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5C0D\u65BC\u500B\u4EBA\u654F\u611F\u6A94\u6848\uFF0C\u5EFA\u8B70\u9032\u884C\u52A0\u5BC6\u58D3\u7E2E\u5F8C\u518D\u4E0A\u50B3\u96F2\u7AEF\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"tar-\u7684\u9650\u5236",children:"Tar \u7684\u9650\u5236"}),"\n",(0,r.jsxs)(n.p,{children:["Tar \u672C\u8EAB\u652F\u63F4\u591A\u7A2E\u58D3\u7E2E\u65B9\u5F0F\uFF08gzip, bz2, xz \u7B49\uFF09\uFF0C\u4F46",(0,r.jsx)(n.strong,{children:"\u4E0D\u652F\u63F4\u52A0\u5BC6\u529F\u80FD"}),"\u3002\u5728\u547D\u4EE4\u5217\u74B0\u5883\u4E0B\u8981\u5BE6\u73FE\u52A0\u5BC6\u6253\u5305\uFF0C\u9700\u8981\u7D50\u5408\u5176\u4ED6\u5DE5\u5177\uFF0C\u6700\u5E38\u7528\u7684\u662F OpenSSL\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u57FA\u672C\u52A0\u5BC6\u6253\u5305",children:"\u57FA\u672C\u52A0\u5BC6\u6253\u5305"}),"\n",(0,r.jsx)(n.h3,{id:"\u52A0\u5BC6\u8A9E\u6CD5",children:"\u52A0\u5BC6\u8A9E\u6CD5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u57FA\u672C\u52A0\u5BC6\u6253\u5305\uFF08\u4E0D\u58D3\u7E2E\uFF09\ntar cvf - FILE_OR_DIRECTORY | openssl des3 -salt -k PASSWORD -out encrypted.tar\n\n# \u52A0\u5BC6\u4E26\u58D3\u7E2E\ntar czf - FILE_OR_DIRECTORY | openssl des3 -salt -k PASSWORD -out encrypted.tar.gz\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u53C3\u6578\u8AAA\u660E",children:"\u53C3\u6578\u8AAA\u660E"}),"\n",(0,r.jsx)(n.h4,{id:"tar-\u53C3\u6578",children:"Tar \u53C3\u6578"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u53C3\u6578"}),(0,r.jsx)(n.th,{children:"\u8AAA\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"c"})}),(0,r.jsx)(n.td,{children:"create - \u5275\u5EFA\u65B0\u7684 tarball"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"v"})}),(0,r.jsx)(n.td,{children:"verbose - \u986F\u793A\u8655\u7406\u904E\u7A0B"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"f -"})}),(0,r.jsx)(n.td,{children:"file - \u8F38\u51FA\u5230\u6A19\u6E96\u8F38\u51FA\uFF08\u7BA1\u9053\uFF09"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"z"})}),(0,r.jsx)(n.td,{children:"gzip - \u4F7F\u7528 gzip \u58D3\u7E2E"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"openssl-\u53C3\u6578",children:"OpenSSL \u53C3\u6578"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u53C3\u6578"}),(0,r.jsx)(n.th,{children:"\u8AAA\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"des3"})}),(0,r.jsx)(n.td,{children:"\u4F7F\u7528 3DES \u52A0\u5BC6\u6F14\u7B97\u6CD5"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-salt"})}),(0,r.jsx)(n.td,{children:"\u6DFB\u52A0\u96A8\u6A5F\u9E7D\u503C\uFF0C\u9632\u7BC4\u5B57\u5178\u653B\u64CA"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-k PASSWORD"})}),(0,r.jsx)(n.td,{children:"\u6307\u5B9A\u52A0\u5BC6\u5BC6\u78BC"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-out FILE"})}),(0,r.jsx)(n.td,{children:"\u6307\u5B9A\u8F38\u51FA\u6A94\u6848\u540D\u7A31"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u89E3\u5BC6\u8207\u9084\u539F",children:"\u89E3\u5BC6\u8207\u9084\u539F"}),"\n",(0,r.jsx)(n.h3,{id:"\u89E3\u5BC6\u8A9E\u6CD5",children:"\u89E3\u5BC6\u8A9E\u6CD5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u89E3\u5BC6\u4E26\u89E3\u5305\nopenssl des3 -d -k PASSWORD -salt -in encrypted.tar | tar xvf -\n\n# \u89E3\u5BC6\u58D3\u7E2E\u6A94\u6848\nopenssl des3 -d -k PASSWORD -salt -in encrypted.tar.gz | tar xzf -\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u89E3\u5BC6\u53C3\u6578",children:"\u89E3\u5BC6\u53C3\u6578"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u53C3\u6578"}),(0,r.jsx)(n.th,{children:"\u8AAA\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-d"})}),(0,r.jsx)(n.td,{children:"decrypt - \u89E3\u5BC6\u6A21\u5F0F"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-in FILE"})}),(0,r.jsx)(n.td,{children:"\u6307\u5B9A\u8F38\u5165\u6A94\u6848"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u9032\u968E\u52A0\u5BC6\u9078\u9805",children:"\u9032\u968E\u52A0\u5BC6\u9078\u9805"}),"\n",(0,r.jsx)(n.h3,{id:"\u66F4\u5B89\u5168\u7684\u52A0\u5BC6\u6F14\u7B97\u6CD5",children:"\u66F4\u5B89\u5168\u7684\u52A0\u5BC6\u6F14\u7B97\u6CD5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4F7F\u7528 AES-256-CBC\uFF08\u63A8\u85A6\uFF09\ntar czf - FILES | openssl aes-256-cbc -salt -k PASSWORD -out encrypted.tar.gz\n\n# \u89E3\u5BC6 AES-256-CBC\nopenssl aes-256-cbc -d -k PASSWORD -salt -in encrypted.tar.gz | tar xzf -\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u4F7F\u7528\u91D1\u9470\u6A94\u6848",children:"\u4F7F\u7528\u91D1\u9470\u6A94\u6848"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u751F\u6210\u96A8\u6A5F\u91D1\u9470\u6A94\u6848\nopenssl rand -base64 32 > encryption.key\n\n# \u4F7F\u7528\u91D1\u9470\u6A94\u6848\u52A0\u5BC6\ntar czf - FILES | openssl aes-256-cbc -salt -kfile encryption.key -out encrypted.tar.gz\n\n# \u4F7F\u7528\u91D1\u9470\u6A94\u6848\u89E3\u5BC6\nopenssl aes-256-cbc -d -salt -kfile encryption.key -in encrypted.tar.gz | tar xzf -\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5BC6\u78BC\u63D0\u793A\u8F38\u5165",children:"\u5BC6\u78BC\u63D0\u793A\u8F38\u5165"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4E92\u52D5\u5F0F\u5BC6\u78BC\u8F38\u5165\uFF08\u66F4\u5B89\u5168\uFF09\ntar czf - FILES | openssl aes-256-cbc -salt -out encrypted.tar.gz\n\n# \u89E3\u5BC6\u6642\u63D0\u793A\u8F38\u5165\u5BC6\u78BC\nopenssl aes-256-cbc -d -salt -in encrypted.tar.gz | tar xzf -\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5BE6\u7528\u8173\u672C\u8207-alias",children:"\u5BE6\u7528\u8173\u672C\u8207 Alias"}),"\n",(0,r.jsx)(n.h3,{id:"\u57FA\u672C-alias-\u8A2D\u5B9A",children:"\u57FA\u672C Alias \u8A2D\u5B9A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# ~/.bashrc \u6216 ~/.zshrc\n\n# \u52A0\u5BC6 alias\uFF08\u4F7F\u7528\u56FA\u5B9A\u5BC6\u78BC\uFF09\nalias encrypt-tar='openssl aes-256-cbc -salt -k YOUR_PASSWORD'\nalias decrypt-tar='openssl aes-256-cbc -d -salt -k YOUR_PASSWORD'\n\n# \u4F7F\u7528\u65B9\u5F0F\ntar czf - important_files/ | encrypt-tar -out backup.tar.gz.enc\ndecrypt-tar -in backup.tar.gz.enc | tar xzf -\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u9032\u968E\u52A0\u5BC6\u8173\u672C",children:"\u9032\u968E\u52A0\u5BC6\u8173\u672C"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# encrypt-backup.sh\n\nset -euo pipefail\n\nif [[ $# -lt 2 ]]; then\n    echo "Usage: $0 <source> <output>"\n    echo "Example: $0 ~/Documents backup.tar.gz.enc"\n    exit 1\nfi\n\nSOURCE="$1"\nOUTPUT="$2"\n\n# \u6AA2\u67E5\u4F86\u6E90\u662F\u5426\u5B58\u5728\nif [[ ! -e "$SOURCE" ]]; then\n    echo "Error: Source \'$SOURCE\' does not exist"\n    exit 1\nfi\n\n# \u63D0\u793A\u8F38\u5165\u5BC6\u78BC\necho "Creating encrypted backup of \'$SOURCE\'..."\necho "Please enter encryption password:"\n\n# \u57F7\u884C\u52A0\u5BC6\u6253\u5305\nif tar czf - "$SOURCE" | openssl aes-256-cbc -salt -out "$OUTPUT"; then\n    echo "Backup created successfully: $OUTPUT"\n    echo "File size: $(du -h "$OUTPUT" | cut -f1)"\nelse\n    echo "Error: Backup failed"\n    exit 1\nfi\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u89E3\u5BC6\u8173\u672C",children:"\u89E3\u5BC6\u8173\u672C"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# decrypt-backup.sh\n\nset -euo pipefail\n\nif [[ $# -lt 1 ]]; then\n    echo "Usage: $0 <encrypted_file> [output_directory]"\n    exit 1\nfi\n\nENCRYPTED_FILE="$1"\nOUTPUT_DIR="${2:-.}"  # \u9810\u8A2D\u70BA\u7576\u524D\u76EE\u9304\n\n# \u6AA2\u67E5\u52A0\u5BC6\u6A94\u6848\u662F\u5426\u5B58\u5728\nif [[ ! -f "$ENCRYPTED_FILE" ]]; then\n    echo "Error: Encrypted file \'$ENCRYPTED_FILE\' not found"\n    exit 1\nfi\n\n# \u5EFA\u7ACB\u8F38\u51FA\u76EE\u9304\nmkdir -p "$OUTPUT_DIR"\ncd "$OUTPUT_DIR"\n\necho "Decrypting \'$ENCRYPTED_FILE\'..."\necho "Please enter decryption password:"\n\n# \u57F7\u884C\u89E3\u5BC6\nif openssl aes-256-cbc -d -salt -in "$ENCRYPTED_FILE" | tar xzf -; then\n    echo "Files extracted successfully to: $(pwd)"\nelse\n    echo "Error: Decryption failed"\n    exit 1\nfi\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6279\u6B21\u8655\u7406",children:"\u6279\u6B21\u8655\u7406"}),"\n",(0,r.jsx)(n.h3,{id:"\u6279\u6B21\u52A0\u5BC6\u591A\u500B\u76EE\u9304",children:"\u6279\u6B21\u52A0\u5BC6\u591A\u500B\u76EE\u9304"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# batch-encrypt.sh\n\nPASSWORD="your-secure-password"\nOUTPUT_DIR="encrypted_backups"\n\nmkdir -p "$OUTPUT_DIR"\n\nfor dir in */; do\n    if [[ -d "$dir" ]]; then\n        output_file="$OUTPUT_DIR/${dir%/}.tar.gz.enc"\n        echo "Encrypting $dir -> $output_file"\n\n        tar czf - "$dir" | openssl aes-256-cbc -salt -k "$PASSWORD" -out "$output_file"\n\n        if [[ $? -eq 0 ]]; then\n            echo "\u2713 Success: $output_file"\n        else\n            echo "\u2717 Failed: $dir"\n        fi\n    fi\ndone\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5B9A\u6642\u5099\u4EFD\u8173\u672C",children:"\u5B9A\u6642\u5099\u4EFD\u8173\u672C"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# scheduled-backup.sh\n\nBACKUP_SOURCE="$HOME/Documents"\nBACKUP_DEST="$HOME/Dropbox/Encrypted_Backups"\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_FILE="backup_$DATE.tar.gz.enc"\nPASSWORD_FILE="$HOME/.backup_password"\n\n# \u6AA2\u67E5\u5BC6\u78BC\u6A94\u6848\nif [[ ! -f "$PASSWORD_FILE" ]]; then\n    echo "Error: Password file not found: $PASSWORD_FILE"\n    exit 1\nfi\n\nmkdir -p "$BACKUP_DEST"\n\necho "Starting backup: $(date)"\necho "Source: $BACKUP_SOURCE"\necho "Destination: $BACKUP_DEST/$BACKUP_FILE"\n\n# \u57F7\u884C\u5099\u4EFD\nif tar czf - "$BACKUP_SOURCE" | openssl aes-256-cbc -salt -kfile "$PASSWORD_FILE" -out "$BACKUP_DEST/$BACKUP_FILE"; then\n    echo "Backup completed successfully: $(date)"\n    echo "File size: $(du -h "$BACKUP_DEST/$BACKUP_FILE" | cut -f1)"\n\n    # \u6E05\u7406\u8D85\u904E 30 \u5929\u7684\u5099\u4EFD\n    find "$BACKUP_DEST" -name "backup_*.tar.gz.enc" -mtime +30 -delete\nelse\n    echo "Backup failed: $(date)"\n    exit 1\nfi\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5B89\u5168\u6027\u8003\u91CF",children:"\u5B89\u5168\u6027\u8003\u91CF"}),"\n",(0,r.jsx)(n.h3,{id:"\u5BC6\u78BC\u7BA1\u7406",children:"\u5BC6\u78BC\u7BA1\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u4F7F\u7528\u74B0\u5883\u8B8A\u6578\uFF08\u8F03\u5B89\u5168\uFF09\nexport BACKUP_PASSWORD="your-secure-password"\ntar czf - FILES | openssl aes-256-cbc -salt -k "$BACKUP_PASSWORD" -out encrypted.tar.gz\n\n# \u5F9E\u6A94\u6848\u8B80\u53D6\u5BC6\u78BC\uFF08\u6700\u5B89\u5168\uFF09\necho "your-secure-password" > ~/.backup_password\nchmod 600 ~/.backup_password\ntar czf - FILES | openssl aes-256-cbc -salt -kfile ~/.backup_password -out encrypted.tar.gz\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u91D1\u9470\u5F37\u5EA6\u5EFA\u8B70",children:"\u91D1\u9470\u5F37\u5EA6\u5EFA\u8B70"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u751F\u6210\u5F37\u5BC6\u78BC\nopenssl rand -base64 32\n\n# \u751F\u6210\u66F4\u9577\u7684\u91D1\u9470\nopenssl rand -hex 64\n\n# \u4F7F\u7528 passphrase \u751F\u6210\u91D1\u9470\necho -n "your-long-passphrase" | openssl dgst -sha256 -binary | openssl base64\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u6A94\u6848\u5B8C\u6574\u6027\u9A57\u8B49",children:"\u6A94\u6848\u5B8C\u6574\u6027\u9A57\u8B49"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u52A0\u5BC6\u524D\u8A08\u7B97\u6821\u9A57\u548C\ntar czf - FILES | tee >(openssl aes-256-cbc -salt -k PASSWORD -out encrypted.tar.gz) | sha256sum > checksum.txt\n\n# \u89E3\u5BC6\u5F8C\u9A57\u8B49\nopenssl aes-256-cbc -d -k PASSWORD -salt -in encrypted.tar.gz | sha256sum -c checksum.txt\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6548\u80FD\u6700\u4F73\u5316",children:"\u6548\u80FD\u6700\u4F73\u5316"}),"\n",(0,r.jsx)(n.h3,{id:"\u58D3\u7E2E\u6F14\u7B97\u6CD5\u6BD4\u8F03",children:"\u58D3\u7E2E\u6F14\u7B97\u6CD5\u6BD4\u8F03"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# gzip\uFF08\u901F\u5EA6\u5FEB\uFF0C\u58D3\u7E2E\u7387\u4E2D\u7B49\uFF09\ntar czf - FILES | openssl aes-256-cbc -salt -k PASSWORD -out backup.tar.gz.enc\n\n# bzip2\uFF08\u901F\u5EA6\u6162\uFF0C\u58D3\u7E2E\u7387\u9AD8\uFF09\ntar cjf - FILES | openssl aes-256-cbc -salt -k PASSWORD -out backup.tar.bz2.enc\n\n# xz\uFF08\u901F\u5EA6\u6700\u6162\uFF0C\u58D3\u7E2E\u7387\u6700\u9AD8\uFF09\ntar cJf - FILES | openssl aes-256-cbc -salt -k PASSWORD -out backup.tar.xz.enc\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5927\u6A94\u6848\u8655\u7406",children:"\u5927\u6A94\u6848\u8655\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4F7F\u7528 pv \u986F\u793A\u9032\u5EA6\ntar czf - LARGE_DIRECTORY | pv | openssl aes-256-cbc -salt -k PASSWORD -out large_backup.tar.gz.enc\n\n# \u5206\u5272\u5927\u6A94\u6848\ntar czf - LARGE_DIRECTORY | openssl aes-256-cbc -salt -k PASSWORD | split -b 1G - backup.tar.gz.enc.\n\n# \u5408\u4F75\u4E26\u89E3\u5BC6\ncat backup.tar.gz.enc.* | openssl aes-256-cbc -d -salt -k PASSWORD | tar xzf -\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u7591\u96E3\u6392\u89E3",children:"\u7591\u96E3\u6392\u89E3"}),"\n",(0,r.jsx)(n.h3,{id:"\u5E38\u898B\u932F\u8AA4",children:"\u5E38\u898B\u932F\u8AA4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5BC6\u78BC\u932F\u8AA4\n# Error: bad decrypt\n# \u89E3\u6C7A\uFF1A\u6AA2\u67E5\u5BC6\u78BC\u662F\u5426\u6B63\u78BA\n\n# \u6A94\u6848\u640D\u58DE\n# Error: invalid padding\n# \u89E3\u6C7A\uFF1A\u6AA2\u67E5\u6A94\u6848\u5B8C\u6574\u6027\uFF0C\u91CD\u65B0\u4E0B\u8F09\n\n# \u6B0A\u9650\u554F\u984C\n# Error: Permission denied\n# \u89E3\u6C7A\uFF1A\u6AA2\u67E5\u6A94\u6848\u6B0A\u9650\nchmod 644 encrypted.tar.gz.enc\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u9664\u932F\u6280\u5DE7",children:"\u9664\u932F\u6280\u5DE7"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u6E2C\u8A66\u52A0\u5BC6/\u89E3\u5BC6\u6D41\u7A0B\necho "test data" | openssl aes-256-cbc -salt -k "password" | openssl aes-256-cbc -d -salt -k "password"\n\n# \u6AA2\u67E5 tar \u6A94\u6848\u5B8C\u6574\u6027\ntar tzf backup.tar.gz  # \u5217\u51FA\u5167\u5BB9\u4F46\u4E0D\u89E3\u58D3\n\n# \u9A57\u8B49\u52A0\u5BC6\u6A94\u6848\nfile encrypted.tar.gz.enc  # \u61C9\u8A72\u986F\u793A "data"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u73FE\u4EE3\u5316\u66FF\u4EE3\u65B9\u6848",children:"\u73FE\u4EE3\u5316\u66FF\u4EE3\u65B9\u6848"}),"\n",(0,r.jsx)(n.h3,{id:"\u4F7F\u7528-gpg",children:"\u4F7F\u7528 GPG"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# GPG \u5C0D\u7A31\u52A0\u5BC6\uFF08\u63A8\u85A6\uFF09\ntar czf - FILES | gpg --symmetric --cipher-algo AES256 --output backup.tar.gz.gpg\n\n# GPG \u89E3\u5BC6\ngpg --decrypt backup.tar.gz.gpg | tar xzf -\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u4F7F\u7528-7zip",children:"\u4F7F\u7528 7zip"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# 7zip \u52A0\u5BC6\u58D3\u7E2E\n7z a -p"password" -mhe=on backup.7z FILES/\n\n# 7zip \u89E3\u5BC6\n7z x backup.7z\n'})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{className:"internal new",href:"/moco/utilities/cli/awesome-cli/",children:"Awesome CLI"})," - \u73FE\u4EE3\u5316 CLI \u5DE5\u5177\u96C6\u5408"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{className:"internal new",href:"/moco/utilities/cli/rclone-dropbox/",children:"Rclone Dropbox"})," - \u96F2\u7AEF\u540C\u6B65\u5DE5\u5177"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.openssl.org/docs/",children:"OpenSSL \u5B98\u65B9\u6587\u6A94"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.gnu.org/software/tar/manual/",children:"Tar \u624B\u518A"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also-1",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://note.drx.tw/2008/04/command.html",children:"GNU / Linux \u5404\u7A2E\u58D3\u7E2E\u8207\u89E3\u58D3\u7E2E\u6307\u4EE4 | \u51CD\u4EC1\u7684\u7B46\u8A18"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.itread01.com/content/1551377067.html",children:"tar\u547D\u4EE4\u52A0\u5BC6\u58D3\u7E2E - IT\u95B1\u8B80"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.itread01.com/content/1547949421.html",children:"Linux tar\u52A0\u5BC6\u58D3\u7E2E\u89E3\u58D3 - IT\u95B1\u8B80"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://blog.changyy.org/2014/06/linux-openssl-des3-ubuntu-1404.html",children:"\u7B2C\u4E8C\u5341\u56DB\u500B\u590F\u5929\u5F8C: [Linux] \u4F7F\u7528 Openssl \u505A\u7C21\u6613\u7684(DES3)\u52A0\u5BC6\u3001\u89E3\u5BC6 @ Ubuntu 14.04"})}),"\n"]})]})}function o(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},84429:function(e,n,s){s.d(n,{R:()=>a,x:()=>i});var l=s(96540);let r={},c=l.createContext(r);function a(e){let n=l.useContext(c);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),l.createElement(c.Provider,{value:n},e.children)}}}]);