"use strict";(self.webpackChunkkywk_me=self.webpackChunkkywk_me||[]).push([["38262"],{13187:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>c,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>r,contentTitle:()=>t});var s=JSON.parse('{"id":"utilities/CLI/jq","title":"jq","description":"command-line JSON processor.","source":"@site/moco/utilities/CLI/jq.md","sourceDirName":"utilities/CLI","slug":"/utilities/cli/jq/","permalink":"/moco/utilities/cli/jq/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"CLI","permalink":"/moco/tags/cli"}],"version":"current","sidebarPosition":10,"frontMatter":{"title":"jq","description":"command-line JSON processor.","tags":["CLI"],"sidebar_position":10,"date_created":"2023-08-10T00:00:00.000Z","date_updated":"2023-08-10T00:00:00.000Z","image":"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0","slug":"/utilities/cli/jq/"},"sidebar":"tutorialSidebar","previous":{"title":"fzf","permalink":"/moco/utilities/CLI/fzf"},"next":{"title":"zoxide","permalink":"/moco/utilities/CLI/zoxide"}}'),a=l(74848),i=l(84429);let c={title:"jq",description:"command-line JSON processor.",tags:["CLI"],sidebar_position:10,date_created:new Date("2023-08-10T00:00:00.000Z"),date_updated:new Date("2023-08-10T00:00:00.000Z"),image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0",slug:"/utilities/cli/jq/"},t="jq",r={},d=[{value:"\u57FA\u672C\u8A9E\u6CD5",id:"\u57FA\u672C\u8A9E\u6CD5",level:2},{value:"\u57FA\u790E\u67E5\u8A62",id:"\u57FA\u790E\u67E5\u8A62",level:3},{value:"\u9663\u5217\u64CD\u4F5C",id:"\u9663\u5217\u64CD\u4F5C",level:3},{value:"\u9032\u968E\u529F\u80FD",id:"\u9032\u968E\u529F\u80FD",level:2},{value:"\u689D\u4EF6\u904E\u6FFE",id:"\u689D\u4EF6\u904E\u6FFE",level:3},{value:"\u8CC7\u6599\u8F49\u63DB",id:"\u8CC7\u6599\u8F49\u63DB",level:3},{value:"\u805A\u5408\u64CD\u4F5C",id:"\u805A\u5408\u64CD\u4F5C",level:3},{value:"\u5BE6\u7528\u7BC4\u4F8B",id:"\u5BE6\u7528\u7BC4\u4F8B",level:2},{value:"API \u8CC7\u6599\u8655\u7406",id:"api-\u8CC7\u6599\u8655\u7406",level:3},{value:"\u8A2D\u5B9A\u6A94\u8655\u7406",id:"\u8A2D\u5B9A\u6A94\u8655\u7406",level:3},{value:"\u65E5\u8A8C\u5206\u6790",id:"\u65E5\u8A8C\u5206\u6790",level:3},{value:"\u5E38\u7528\u9078\u9805",id:"\u5E38\u7528\u9078\u9805",level:2},{value:"Bash Script \u4E2D\u7684\u6CE8\u610F\u4E8B\u9805",id:"bash-script-\u4E2D\u7684\u6CE8\u610F\u4E8B\u9805",level:2},{value:"\u5BE6\u7528 Alias",id:"\u5BE6\u7528-alias",level:2},{value:"See Also",id:"see-also",level:2}];function o(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"jq",children:"jq"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://jqlang.github.io/jq/",children:"jq"})," is a lightweight and flexible command-line JSON processor."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u5F37\u5927\u7684 JSON \u8655\u7406\u5DE5\u5177\uFF0C\u652F\u63F4\u67E5\u8A62\u3001\u904E\u6FFE\u3001\u8F49\u63DB JSON \u8CC7\u6599\uFF0C\u662F API \u958B\u767C\u548C\u8CC7\u6599\u8655\u7406\u7684\u5FC5\u5099\u5DE5\u5177\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u57FA\u672C\u8A9E\u6CD5",children:"\u57FA\u672C\u8A9E\u6CD5"}),"\n",(0,a.jsx)(n.h3,{id:"\u57FA\u790E\u67E5\u8A62",children:"\u57FA\u790E\u67E5\u8A62"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u7F8E\u5316\u8F38\u51FA JSON\necho \'{"name":"John","age":30}\' | jq .\n\n# \u53D6\u5F97\u7279\u5B9A\u6B04\u4F4D\necho \'{"name":"John","age":30}\' | jq \'.name\'\n# \u8F38\u51FA: "John"\n\n# \u53D6\u5F97\u5DE2\u72C0\u6B04\u4F4D\necho \'{"user":{"name":"John","age":30}}\' | jq \'.user.name\'\n# \u8F38\u51FA: "John"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u9663\u5217\u64CD\u4F5C",children:"\u9663\u5217\u64CD\u4F5C"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u53D6\u5F97\u9663\u5217\u7B2C\u4E00\u500B\u5143\u7D20\necho \'[{"name":"John"},{"name":"Jane"}]\' | jq \'.[0]\'\n\n# \u53D6\u5F97\u6240\u6709 name \u6B04\u4F4D\necho \'[{"name":"John"},{"name":"Jane"}]\' | jq \'.[].name\'\n\n# \u9663\u5217\u9577\u5EA6\necho \'[1,2,3,4,5]\' | jq \'length\'\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u9032\u968E\u529F\u80FD",children:"\u9032\u968E\u529F\u80FD"}),"\n",(0,a.jsx)(n.h3,{id:"\u689D\u4EF6\u904E\u6FFE",children:"\u689D\u4EF6\u904E\u6FFE"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u904E\u6FFE\u5E74\u9F61\u5927\u65BC 25 \u7684\u4F7F\u7528\u8005\necho \'[{"name":"John","age":30},{"name":"Jane","age":20}]\' | jq \'.[] | select(.age > 25)\'\n\n# \u904E\u6FFE\u5305\u542B\u7279\u5B9A\u5B57\u4E32\u7684\u9805\u76EE\necho \'[{"name":"John"},{"name":"Jane"}]\' | jq \'.[] | select(.name | contains("Jo"))\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u8CC7\u6599\u8F49\u63DB",children:"\u8CC7\u6599\u8F49\u63DB"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u5EFA\u7ACB\u65B0\u7684 JSON \u7269\u4EF6\necho \'{"firstName":"John","lastName":"Doe"}\' | jq \'{fullName: (.firstName + " " + .lastName)}\'\n\n# \u9663\u5217\u6620\u5C04\necho \'[1,2,3,4,5]\' | jq \'map(. * 2)\'\n\n# \u6392\u5E8F\necho \'[{"name":"John","age":30},{"name":"Jane","age":20}]\' | jq \'sort_by(.age)\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u805A\u5408\u64CD\u4F5C",children:"\u805A\u5408\u64CD\u4F5C"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u8A08\u7B97\u7E3D\u548C\necho \'[1,2,3,4,5]\' | jq \'add\'\n\n# \u627E\u6700\u5927\u503C\necho \'[{"age":30},{"age":20},{"age":35}]\' | jq \'map(.age) | max\'\n\n# \u5206\u7D44\necho \'[{"type":"A","value":1},{"type":"B","value":2},{"type":"A","value":3}]\' | jq \'group_by(.type)\'\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u5BE6\u7528\u7BC4\u4F8B",children:"\u5BE6\u7528\u7BC4\u4F8B"}),"\n",(0,a.jsx)(n.h3,{id:"api-\u8CC7\u6599\u8655\u7406",children:"API \u8CC7\u6599\u8655\u7406"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u5F9E GitHub API \u53D6\u5F97 repository \u540D\u7A31\ncurl -s \"https://api.github.com/users/octocat/repos\" | jq '.[].name'\n\n# \u53D6\u5F97\u7279\u5B9A\u6B04\u4F4D\u4E26\u683C\u5F0F\u5316\ncurl -s \"https://api.github.com/users/octocat/repos\" | jq '.[] | {name: .name, stars: .stargazers_count}'\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u8A2D\u5B9A\u6A94\u8655\u7406",children:"\u8A2D\u5B9A\u6A94\u8655\u7406"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u8B80\u53D6 package.json \u7684\u4F9D\u8CF4\ncat package.json | jq '.dependencies'\n\n# \u66F4\u65B0 JSON \u6A94\u6848\u4E2D\u7684\u503C\njq '.version = \"2.0.0\"' package.json > package_new.json\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u65E5\u8A8C\u5206\u6790",children:"\u65E5\u8A8C\u5206\u6790"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u904E\u6FFE\u932F\u8AA4\u65E5\u8A8C\ncat app.log | jq 'select(.level == \"error\")'\n\n# \u7D71\u8A08\u4E0D\u540C\u7B49\u7D1A\u7684\u65E5\u8A8C\u6578\u91CF\ncat app.log | jq -s 'group_by(.level) | map({level: .[0].level, count: length})'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5E38\u7528\u9078\u9805",children:"\u5E38\u7528\u9078\u9805"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"\u9078\u9805"}),(0,a.jsx)(n.th,{children:"\u8AAA\u660E"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"-r"})}),(0,a.jsx)(n.td,{children:"\u539F\u59CB\u8F38\u51FA\uFF0C\u4E0D\u52A0\u5F15\u865F"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"-c"})}),(0,a.jsx)(n.td,{children:"\u7DCA\u6E4A\u8F38\u51FA\uFF0C\u4E0D\u7F8E\u5316\u683C\u5F0F"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"-s"})}),(0,a.jsx)(n.td,{children:"\u5C07\u591A\u500B JSON \u8F38\u5165\u5408\u4F75\u70BA\u9663\u5217"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"-e"})}),(0,a.jsx)(n.td,{children:"\u8A2D\u5B9A\u9000\u51FA\u72C0\u614B\u78BC"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"--tab"})}),(0,a.jsx)(n.td,{children:"\u4F7F\u7528 tab \u7E2E\u6392"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"-f file"})}),(0,a.jsx)(n.td,{children:"\u5F9E\u6A94\u6848\u8B80\u53D6 jq \u7A0B\u5F0F"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"bash-script-\u4E2D\u7684\u6CE8\u610F\u4E8B\u9805",children:"Bash Script \u4E2D\u7684\u6CE8\u610F\u4E8B\u9805"}),"\n",(0,a.jsx)(n.p,{children:"\u5728 BASH script \u4F7F\u7528 jq \u6642\u7684\u91CD\u8981\u63D0\u9192\uFF1A"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u274C \u932F\u8AA4\uFF1A\u5B57\u4E32\u503C\u6703\u5305\u542B\u5F15\u865F\nVAR=$(echo '{\"name\":\"John\"}' | jq '.name')\necho $VAR  # \u8F38\u51FA: \"John\" (\u5305\u542B\u5F15\u865F)\n\n# \u2705 \u6B63\u78BA\uFF1A\u4F7F\u7528 -r \u9078\u9805\u53BB\u9664\u5F15\u865F\nVAR=$(echo '{\"name\":\"John\"}' | jq -r '.name')\necho $VAR  # \u8F38\u51FA: John (\u4E0D\u542B\u5F15\u865F)\n\n# \u274C \u6CE8\u610F\uFF1Anull \u503C\u6703\u8B8A\u6210\u5B57\u4E32 \"null\"\nVAR=$(echo '{}' | jq '.nonexistent')\necho $VAR  # \u8F38\u51FA: null (\u5B57\u4E32)\n\n# \u2705 \u8655\u7406 null \u503C\nVAR=$(echo '{}' | jq -r '.nonexistent // \"default\"')\necho $VAR  # \u8F38\u51FA: default\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5BE6\u7528-alias",children:"\u5BE6\u7528 Alias"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u7F8E\u5316 JSON\nalias json='jq .'\n\n# \u53D6\u5F97 JSON \u7684\u6240\u6709 key\nalias jkeys='jq -r \"keys[]\"'\n\n# \u58D3\u7E2E JSON\nalias jmin='jq -c .'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{className:"internal new",href:"/moco/utilities/cli/awesome-cli/",children:"Awesome CLI"})," - \u73FE\u4EE3\u5316 CLI \u5DE5\u5177\u96C6\u5408"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://myapollo.com.tw/blog/jq-by-example/",children:"jq \u5BE6\u6230\u6559\u5B78 - MyApollo"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://medium.com/evan-fang/jq-%E5%91%BD%E4%BB%A4%E5%88%97json%E8%99%95%E7%90%86%E5%B7%A5%E5%85%B7-a553c8940ef5",children:"jq : \u547D\u4EE4\u5217json\u8655\u7406\u5DE5\u5177 - Medium"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://jqlang.github.io/jq/manual/",children:"jq Manual"})}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},84429:function(e,n,l){l.d(n,{R:()=>c,x:()=>t});var s=l(96540);let a={},i=s.createContext(a);function c(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);