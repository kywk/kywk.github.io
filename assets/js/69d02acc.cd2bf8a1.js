"use strict";(self.webpackChunkkywk_me=self.webpackChunkkywk_me||[]).push([["68806"],{36776:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>t,toc:()=>u,default:()=>c,metadata:()=>l,assets:()=>o,contentTitle:()=>a});var l=JSON.parse('{"id":"java/Spring Boot/Spring/Spring Value Defaults","title":"Value Defaults","description":"Spring Core Basics: Value Defaults","source":"@site/moco/java/Spring Boot/Spring/Spring Value Defaults.md","sourceDirName":"java/Spring Boot/Spring","slug":"/java/spring-boot/spring/spring-value-defaults/","permalink":"/moco/java/spring-boot/spring/spring-value-defaults/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"SpringBoot","permalink":"/moco/tags/spring-boot"},{"inline":true,"label":"Tutorial","permalink":"/moco/tags/tutorial"},{"inline":true,"label":"SpringBoot/CoreBasics","permalink":"/moco/tags/spring-boot-core-basics"},{"inline":true,"label":"SpringBoot/Properties","permalink":"/moco/tags/spring-boot-properties"}],"version":"current","frontMatter":{"title":"Value Defaults","description":"Spring Core Basics: Value Defaults","tags":["SpringBoot","Tutorial","SpringBoot/CoreBasics","SpringBoot/Properties"],"date_created":"2023-08-23T00:00:00.000Z","date_updated":"2023-08-23T00:00:00.000Z","image":"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0","slug":"/java/spring-boot/spring/spring-value-defaults/"},"sidebar":"tutorialSidebar","previous":{"title":"Value Annotation","permalink":"/moco/java/spring-boot/spring/spring-value-annotation/"},"next":{"title":"Apache Maven","permalink":"/moco/java/apache-maven/"}}'),s=r(74848),i=r(84429);let t={title:"Value Defaults",description:"Spring Core Basics: Value Defaults",tags:["SpringBoot","Tutorial","SpringBoot/CoreBasics","SpringBoot/Properties"],date_created:new Date("2023-08-23T00:00:00.000Z"),date_updated:new Date("2023-08-23T00:00:00.000Z"),image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0",slug:"/java/spring-boot/spring/spring-value-defaults/"},a="[Spring] @Value Defaults",o={},u=[{value:"Overview",id:"overview",level:2},{value:"\u57FA\u672C\u8A9E\u6CD5",id:"\u57FA\u672C\u8A9E\u6CD5",level:2},{value:"\u5B57\u4E32\u9810\u8A2D\u503C",id:"\u5B57\u4E32\u9810\u8A2D\u503C",level:3},{value:"\u57FA\u672C\u985E\u578B\u9810\u8A2D\u503C",id:"\u57FA\u672C\u985E\u578B\u9810\u8A2D\u503C",level:3},{value:"\u9663\u5217\u9810\u8A2D\u503C",id:"\u9663\u5217\u9810\u8A2D\u503C",level:3},{value:"\u4F7F\u7528 SpEL \u8868\u9054\u5F0F",id:"\u4F7F\u7528-spel-\u8868\u9054\u5F0F",level:2},{value:"SpEL \u9810\u8A2D\u503C\u7684\u512A\u52E2",id:"spel-\u9810\u8A2D\u503C\u7684\u512A\u52E2",level:3},{value:"\u5BE6\u7528\u7BC4\u4F8B",id:"\u5BE6\u7528\u7BC4\u4F8B",level:3},{value:"\u7E3D\u7D50",id:"\u7E3D\u7D50",level:2},{value:"\u6700\u4F73\u5BE6\u8E10",id:"\u6700\u4F73\u5BE6\u8E10",level:3},{value:"\u5E38\u898B\u932F\u8AA4",id:"\u5E38\u898B\u932F\u8AA4",level:3},{value:"See Also",id:"see-also",level:2}];function d(e){let n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"spring-value-defaults",children:"[Spring] @Value Defaults"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Src: ",(0,s.jsx)(n.a,{href:"https://www.baeldung.com/spring-value-defaults",children:"Using Spring @Value with Defaults | Baeldung"}),(0,s.jsx)(n.br,{}),"\nNoted: 2023-08-23"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Spring's ",(0,s.jsx)(n.em,{children:"@Value"})," annotation provides a convenient way to inject property values into components.\nIt's also quite useful to ",(0,s.jsx)(n.strong,{children:"provide sensible defaults for cases where a property may not be present"}),"\n\u2014 how to specify a default value for the @Value Spring annotation."]}),"\n",(0,s.jsx)(n.h2,{id:"\u57FA\u672C\u8A9E\u6CD5",children:"\u57FA\u672C\u8A9E\u6CD5"}),"\n",(0,s.jsx)(n.h3,{id:"\u5B57\u4E32\u9810\u8A2D\u503C",children:"\u5B57\u4E32\u9810\u8A2D\u503C"}),"\n",(0,s.jsx)(n.p,{children:"\u8A2D\u5B9A\u5B57\u4E32\u5C6C\u6027\u9810\u8A2D\u503C\u7684\u57FA\u672C\u8A9E\u6CD5\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:my default value}")\nprivate String stringWithDefaultValue;\n'})}),"\n",(0,s.jsx)(n.p,{children:'\u5982\u679C some.key \u7121\u6CD5\u89E3\u6790\uFF0CstringWithDefaultValue \u5C07\u88AB\u8A2D\u5B9A\u70BA\u9810\u8A2D\u503C "my default value"\u3002'}),"\n",(0,s.jsx)(n.p,{children:"\u540C\u6A23\u5730\uFF0C\u6211\u5011\u53EF\u4EE5\u8A2D\u5B9A\u7A7A\u5B57\u4E32\u4F5C\u70BA\u9810\u8A2D\u503C\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:}")\nprivate String stringWithBlankDefaultValue;\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91CD\u8981"}),"\uFF1A@Value \u8A3B\u89E3\u4E2D ",(0,s.jsx)(n.code,{children:":"})," \u5F8C\u9762\u5373\u70BA\u9810\u8A2D\u503C\u3002\n\u6C92\u6709\u7D66\u4EFB\u4F55\u503C\u7684\u8A71\u4E26\u4E0D\u70BA ",(0,s.jsx)(n.code,{children:"null"}),"\uFF0C\u800C\u662F\u6839\u64DA\u4E0D\u540C\u7269\u4EF6\u985E\u578B\u6709\u4E0D\u540C\u7684\u9810\u8A2D\u5167\u5BB9\u3002\n\u5C0D\u65BC String \u985E\u578B\uFF0C\u9810\u8A2D\u503C\u6703\u662F\u7A7A\u5B57\u4E32 ",(0,s.jsx)(n.code,{children:'""'}),"\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u57FA\u672C\u985E\u578B\u9810\u8A2D\u503C",children:"\u57FA\u672C\u985E\u578B\u9810\u8A2D\u503C"}),"\n",(0,s.jsx)(n.p,{children:"\u5C0D\u65BC boolean \u548C int \u7B49\u57FA\u672C\u985E\u578B\uFF0C\u6211\u5011\u4F7F\u7528\u5B57\u9762\u503C\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:true}")\nprivate boolean booleanWithDefaultValue;\n\n@Value("${some.key:42}")\nprivate int intWithDefaultValue;\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679C\u9700\u8981\uFF0C\u6211\u5011\u53EF\u4EE5\u4F7F\u7528\u5305\u88DD\u985E\u578B Boolean \u548C Integer \u4F86\u53D6\u4EE3\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u9663\u5217\u9810\u8A2D\u503C",children:"\u9663\u5217\u9810\u8A2D\u503C"}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u5011\u4E5F\u53EF\u4EE5\u5C07\u9017\u865F ",(0,s.jsx)(n.code,{children:","})," \u5206\u9694\u7684\u503C\u5217\u8868\u6CE8\u5165\u5230\u9663\u5217\u4E2D\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Value("${some.key:one,two,three}")\nprivate String[] stringArrayWithDefaults;\n\n@Value("${some.key:1,2,3}")\nprivate int[] intArrayWithDefaults;\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u4E0A\u9762\u7684\u7B2C\u4E00\u500B\u7BC4\u4F8B\u4E2D\uFF0C\u503C one\u3001two \u548C three \u4F5C\u70BA\u9810\u8A2D\u503C\u6CE8\u5165\u5230 stringArrayWithDefaults \u4E2D\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u4F7F\u7528-spel-\u8868\u9054\u5F0F",children:"\u4F7F\u7528 SpEL \u8868\u9054\u5F0F"}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u5011\u4E5F\u53EF\u4EE5\u4F7F\u7528 Spring Expression Language (SpEL) \u4F86\u6307\u5B9A\u8868\u9054\u5F0F\u548C\u9810\u8A2D\u503C\u3002"}),"\n",(0,s.jsx)(n.p,{children:'\u5728\u4E0B\u9762\u7684\u7BC4\u4F8B\u4E2D\uFF0C\u6211\u5011\u671F\u671B some.system.key \u88AB\u8A2D\u5B9A\u70BA\u7CFB\u7D71\u5C6C\u6027\uFF0C\n\u5982\u679C\u6C92\u6709\u8A2D\u5B9A\uFF0C\u6211\u5011\u5E0C\u671B\u4F7F\u7528 "my default system property value" \u4F5C\u70BA\u9810\u8A2D\u503C\uFF1A'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Value(\"#{systemProperties['some.key'] ?: 'my default system property value'}\")\nprivate String spelWithDefaultValue;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"spel-\u9810\u8A2D\u503C\u7684\u512A\u52E2",children:"SpEL \u9810\u8A2D\u503C\u7684\u512A\u52E2"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u66F4\u5F37\u5927\u7684\u8868\u9054\u5F0F"}),"\uFF1A\u53EF\u4EE5\u4F7F\u7528\u8907\u96DC\u7684\u908F\u8F2F\u904B\u7B97"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u52D5\u614B\u8A08\u7B97"}),"\uFF1A\u53EF\u4EE5\u5728\u904B\u884C\u6642\u8A08\u7B97\u9810\u8A2D\u503C"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5B89\u5168\u5B58\u53D6"}),"\uFF1A\u4F7F\u7528 Elvis \u904B\u7B97\u5B50 ",(0,s.jsx)(n.code,{children:"?:"})," \u907F\u514D null \u503C"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5BE6\u7528\u7BC4\u4F8B",children:"\u5BE6\u7528\u7BC4\u4F8B"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"// \u6839\u64DA\u74B0\u5883\u8A2D\u5B9A\u4E0D\u540C\u7684\u9810\u8A2D\u503C\n@Value(\"#{systemProperties['env'] == 'prod' ? 'production-default' : 'dev-default'}\")\nprivate String environmentDefault;\n\n// \u5F9E\u5176\u4ED6 Bean \u7372\u53D6\u9810\u8A2D\u503C\n@Value(\"#{configService.getDefaultTimeout() ?: 30000}\")\nprivate long timeoutMs;\n\n// \u8907\u96DC\u7684\u689D\u4EF6\u5224\u65B7\n@Value(\"#{systemProperties['debug'] != null and systemProperties['debug'] == 'true' ? 'DEBUG' : 'INFO'}\")\nprivate String logLevel;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7E3D\u7D50",children:"\u7E3D\u7D50"}),"\n",(0,s.jsxs)(n.p,{children:["Spring @Value \u8A3B\u89E3\u4E2D\u7684\u683C\u5F0F\u898F\u7BC4\u985E\u4F3C YAML\uFF0C\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:","})," \u5340\u9694\u9663\u5217\u5143\u7D20\uFF0C\u975E\u5FC5\u8981\u4E26\u7121\u9808\u7279\u5225\u52A0\u4E0A ",(0,s.jsx)(n.code,{children:'""'})," \u7B49\u7B26\u865F\u3002\n\u4F46\u82E5\u5B57\u4E32\u4E2D\u6709\u6DF7\u96DC\u7279\u6B8A\u5B57\u5143\u7B49\u5C0E\u81F4\u8AA4\u5224\uFF0C\u53EF\u5229\u7528 ",(0,s.jsx)(n.code,{children:"'"})," \u55AE\u5F15\u865F\u4F86\u5B9A\u7FA9\u5B57\u4E32\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6700\u4F73\u5BE6\u8E10",children:"\u6700\u4F73\u5BE6\u8E10"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u59CB\u7D42\u63D0\u4F9B\u9810\u8A2D\u503C"}),"\uFF1A\u907F\u514D\u61C9\u7528\u7A0B\u5F0F\u56E0\u7F3A\u5C11\u914D\u7F6E\u800C\u5931\u6557"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4F7F\u7528\u6709\u610F\u7FA9\u7684\u9810\u8A2D\u503C"}),"\uFF1A\u9810\u8A2D\u503C\u61C9\u8A72\u662F\u5408\u7406\u7684\u5099\u7528\u9078\u9805"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6587\u4EF6\u5316\u9810\u8A2D\u503C"}),"\uFF1A\u5728\u4EE3\u78BC\u6216\u914D\u7F6E\u6587\u4EF6\u4E2D\u8AAA\u660E\u9810\u8A2D\u503C\u7684\u610F\u7FA9"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u74B0\u5883\u7279\u5B9A\u914D\u7F6E"}),"\uFF1A\u4E0D\u540C\u74B0\u5883\u4F7F\u7528\u4E0D\u540C\u7684\u9810\u8A2D\u503C"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5E38\u898B\u932F\u8AA4",children:"\u5E38\u898B\u932F\u8AA4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'// \u932F\u8AA4\uFF1A\u6C92\u6709\u9810\u8A2D\u503C\uFF0C\u53EF\u80FD\u5C0E\u81F4\u61C9\u7528\u7A0B\u5F0F\u5931\u6557\n@Value("${database.url}")\nprivate String databaseUrl;\n\n// \u6B63\u78BA\uFF1A\u63D0\u4F9B\u5408\u7406\u7684\u9810\u8A2D\u503C\n@Value("${database.url:jdbc:h2:mem:testdb}")\nprivate String databaseUrl;\n\n// \u932F\u8AA4\uFF1A\u9810\u8A2D\u503C\u4E0D\u5408\u7406\n@Value("${server.port:}")\nprivate int serverPort;\n\n// \u6B63\u78BA\uFF1A\u63D0\u4F9B\u6709\u610F\u7FA9\u7684\u9810\u8A2D\u503C\n@Value("${server.port:8080}")\nprivate int serverPort;\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u672C\u6587\u4ECB\u7D39\u4E86\u5982\u4F55\u70BA\u6211\u5011\u5E0C\u671B\u4F7F\u7528 Spring @Value \u8A3B\u89E3\u6CE8\u5165\u7684\u5C6C\u6027\u8A2D\u5B9A\u9810\u8A2D\u503C\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u5E38\uFF0C\u672C\u6587\u4E2D\u4F7F\u7528\u7684\u6240\u6709\u4EE3\u78BC\u7BC4\u4F8B\u90FD\u53EF\u4EE5\u5728 ",(0,s.jsx)(n.a,{href:"https://github.com/eugenp/tutorials/tree/master/spring-boot-modules/spring-boot-properties-2",children:"GitHub \u5C08\u6848"})," \u4E2D\u627E\u5230\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/eugenp/tutorials/tree/master/spring-boot-modules/spring-boot-properties-2",children:"GitHub project"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{className:"internal new",href:"/moco/java/spring-boot/spring/spring-value-annotation/",children:"@Value Annotation"})}),"\n"]})]})}function c(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},84429:function(e,n,r){r.d(n,{R:()=>t,x:()=>a});var l=r(96540);let s={},i=l.createContext(s);function t(e){let n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);