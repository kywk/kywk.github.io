"use strict";(self.webpackChunkkywk_me=self.webpackChunkkywk_me||[]).push([["18742"],{1561:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>o,toc:()=>p,default:()=>c,metadata:()=>t,assets:()=>l,contentTitle:()=>a});var t=JSON.parse('{"id":"java/Spring Boot/Spring Boot Web Service","title":"Web Service","description":"Spring Boot: Web Service","source":"@site/moco/java/Spring Boot/Spring Boot Web Service.md","sourceDirName":"java/Spring Boot","slug":"/java/spring-boot/spring-boot-web-service/","permalink":"/moco/java/spring-boot/spring-boot-web-service/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"SpringBoot","permalink":"/moco/tags/spring-boot"}],"version":"current","sidebarPosition":70,"frontMatter":{"title":"Web Service","description":"Spring Boot: Web Service","tags":["SpringBoot"],"sidebar_position":70,"hide_table_of_contents":true,"date_created":"2023-02-24T00:00:00.000Z","date_updated":"2023-02-24T00:00:00.000Z","image":"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0","slug":"/java/spring-boot/spring-boot-web-service/"},"sidebar":"tutorialSidebar","previous":{"title":"JWT","permalink":"/moco/java/spring-boot/spring-boot-jwt/"},"next":{"title":"Dockerize","permalink":"/moco/java/spring-boot/spring-boot-dockerize/"}}'),r=s(74848),i=s(84429);let o={title:"Web Service",description:"Spring Boot: Web Service",tags:["SpringBoot"],sidebar_position:70,hide_table_of_contents:!0,date_created:new Date("2023-02-24T00:00:00.000Z"),date_updated:new Date("2023-02-24T00:00:00.000Z"),image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0",slug:"/java/spring-boot/spring-boot-web-service/"},a="Spring Boot Web Services \u958B\u767C\u6307\u5357",l={},p=[{value:"\u6982\u8FF0",id:"\u6982\u8FF0",level:2},{value:"RESTful Web Services",id:"restful-web-services",level:2},{value:"\u57FA\u672C REST Controller",id:"\u57FA\u672C-rest-controller",level:3},{value:"\u5167\u5BB9\u5354\u5546 (Content Negotiation)",id:"\u5167\u5BB9\u5354\u5546-content-negotiation",level:3},{value:"\u7570\u5E38\u8655\u7406",id:"\u7570\u5E38\u8655\u7406",level:3},{value:"SOAP Web Services",id:"soap-web-services",level:2},{value:"Maven \u4F9D\u8CF4",id:"maven-\u4F9D\u8CF4",level:3},{value:"XSD \u5B9A\u7FA9",id:"xsd-\u5B9A\u7FA9",level:3},{value:"SOAP Endpoint",id:"soap-endpoint",level:3},{value:"Web Service \u914D\u7F6E",id:"web-service-\u914D\u7F6E",level:3},{value:"API \u6587\u4EF6\u5316",id:"api-\u6587\u4EF6\u5316",level:2},{value:"OpenAPI/Swagger \u6574\u5408",id:"openapiswagger-\u6574\u5408",level:3},{value:"API \u8A3B\u89E3",id:"api-\u8A3B\u89E3",level:3},{value:"\u5B89\u5168\u6027",id:"\u5B89\u5168\u6027",level:2},{value:"API \u91D1\u9470\u9A57\u8B49",id:"api-\u91D1\u9470\u9A57\u8B49",level:3},{value:"\u901F\u7387\u9650\u5236",id:"\u901F\u7387\u9650\u5236",level:3},{value:"\u6E2C\u8A66",id:"\u6E2C\u8A66",level:2},{value:"REST API \u6E2C\u8A66",id:"rest-api-\u6E2C\u8A66",level:3},{value:"SOAP Web Service \u6E2C\u8A66",id:"soap-web-service-\u6E2C\u8A66",level:3},{value:"\u6700\u4F73\u5BE6\u8E10",id:"\u6700\u4F73\u5BE6\u8E10",level:2},{value:"1. API \u7248\u672C\u63A7\u5236",id:"1-api-\u7248\u672C\u63A7\u5236",level:3},{value:"2. \u5206\u9801\u548C\u6392\u5E8F",id:"2-\u5206\u9801\u548C\u6392\u5E8F",level:3},{value:"3. \u5FEB\u53D6",id:"3-\u5FEB\u53D6",level:3},{value:"See Also",id:"see-also",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"spring-boot-web-services-\u958B\u767C\u6307\u5357",children:"Spring Boot Web Services \u958B\u767C\u6307\u5357"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6982\u8FF0",children:"\u6982\u8FF0"}),"\n",(0,r.jsx)(n.p,{children:"Spring Boot \u63D0\u4F9B\u4E86\u5F37\u5927\u7684 Web Services \u958B\u767C\u652F\u63F4\uFF0C\u5305\u62EC RESTful Web Services \u548C SOAP Web Services\u3002\u672C\u6587\u5C07\u4ECB\u7D39\u5982\u4F55\u4F7F\u7528 Spring Boot \u958B\u767C\u5404\u7A2E\u985E\u578B\u7684 Web Services\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"restful-web-services",children:"RESTful Web Services"}),"\n",(0,r.jsx)(n.h3,{id:"\u57FA\u672C-rest-controller",children:"\u57FA\u672C REST Controller"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api/users")\npublic class UserController {\n    \n    @Autowired\n    private UserService userService;\n    \n    @GetMapping\n    public ResponseEntity<List<User>> getAllUsers() {\n        List<User> users = userService.findAll();\n        return ResponseEntity.ok(users);\n    }\n    \n    @GetMapping("/{id}")\n    public ResponseEntity<User> getUserById(@PathVariable Long id) {\n        User user = userService.findById(id);\n        if (user != null) {\n            return ResponseEntity.ok(user);\n        }\n        return ResponseEntity.notFound().build();\n    }\n    \n    @PostMapping\n    public ResponseEntity<User> createUser(@Valid @RequestBody User user) {\n        User savedUser = userService.save(user);\n        return ResponseEntity.status(HttpStatus.CREATED).body(savedUser);\n    }\n    \n    @PutMapping("/{id}")\n    public ResponseEntity<User> updateUser(@PathVariable Long id, @Valid @RequestBody User user) {\n        User updatedUser = userService.update(id, user);\n        if (updatedUser != null) {\n            return ResponseEntity.ok(updatedUser);\n        }\n        return ResponseEntity.notFound().build();\n    }\n    \n    @DeleteMapping("/{id}")\n    public ResponseEntity<Void> deleteUser(@PathVariable Long id) {\n        boolean deleted = userService.delete(id);\n        if (deleted) {\n            return ResponseEntity.noContent().build();\n        }\n        return ResponseEntity.notFound().build();\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5167\u5BB9\u5354\u5546-content-negotiation",children:"\u5167\u5BB9\u5354\u5546 (Content Negotiation)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api/products")\npublic class ProductController {\n    \n    @GetMapping(value = "/{id}", produces = {MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE})\n    public ResponseEntity<Product> getProduct(@PathVariable Long id) {\n        Product product = productService.findById(id);\n        return ResponseEntity.ok(product);\n    }\n    \n    @PostMapping(consumes = {MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE})\n    public ResponseEntity<Product> createProduct(@RequestBody Product product) {\n        Product savedProduct = productService.save(product);\n        return ResponseEntity.status(HttpStatus.CREATED).body(savedProduct);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7570\u5E38\u8655\u7406",children:"\u7570\u5E38\u8655\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@ControllerAdvice\npublic class GlobalExceptionHandler {\n    \n    @ExceptionHandler(ResourceNotFoundException.class)\n    public ResponseEntity<ErrorResponse> handleResourceNotFound(ResourceNotFoundException ex) {\n        ErrorResponse error = new ErrorResponse(\n            "RESOURCE_NOT_FOUND",\n            ex.getMessage(),\n            System.currentTimeMillis()\n        );\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(error);\n    }\n    \n    @ExceptionHandler(ValidationException.class)\n    public ResponseEntity<ErrorResponse> handleValidation(ValidationException ex) {\n        ErrorResponse error = new ErrorResponse(\n            "VALIDATION_ERROR",\n            ex.getMessage(),\n            System.currentTimeMillis()\n        );\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(error);\n    }\n    \n    @ExceptionHandler(Exception.class)\n    public ResponseEntity<ErrorResponse> handleGeneral(Exception ex) {\n        ErrorResponse error = new ErrorResponse(\n            "INTERNAL_ERROR",\n            "An unexpected error occurred",\n            System.currentTimeMillis()\n        );\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(error);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"soap-web-services",children:"SOAP Web Services"}),"\n",(0,r.jsx)(n.h3,{id:"maven-\u4F9D\u8CF4",children:"Maven \u4F9D\u8CF4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web-services</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>wsdl4j</groupId>\n        <artifactId>wsdl4j</artifactId>\n    </dependency>\n</dependencies>\n\n<build>\n    <plugins>\n        <plugin>\n            <groupId>org.codehaus.mojo</groupId>\n            <artifactId>jaxb2-maven-plugin</artifactId>\n            <version>3.1.0</version>\n            <executions>\n                <execution>\n                    <id>xjc</id>\n                    <goals>\n                        <goal>xjc</goal>\n                    </goals>\n                </execution>\n            </executions>\n            <configuration>\n                <sources>\n                    <source>${project.basedir}/src/main/resources/xsd</source>\n                </sources>\n            </configuration>\n        </plugin>\n    </plugins>\n</build>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"xsd-\u5B9A\u7FA9",children:"XSD \u5B9A\u7FA9"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- src/main/resources/xsd/users.xsd --\x3e\n<?xml version="1.0" encoding="UTF-8"?>\n<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"\n           xmlns:tns="http://example.com/users"\n           targetNamespace="http://example.com/users"\n           elementFormDefault="qualified">\n\n    <xs:element name="getUserRequest">\n        <xs:complexType>\n            <xs:sequence>\n                <xs:element name="id" type="xs:long"/>\n            </xs:sequence>\n        </xs:complexType>\n    </xs:element>\n\n    <xs:element name="getUserResponse">\n        <xs:complexType>\n            <xs:sequence>\n                <xs:element name="user" type="tns:user"/>\n            </xs:sequence>\n        </xs:complexType>\n    </xs:element>\n\n    <xs:complexType name="user">\n        <xs:sequence>\n            <xs:element name="id" type="xs:long"/>\n            <xs:element name="name" type="xs:string"/>\n            <xs:element name="email" type="xs:string"/>\n        </xs:sequence>\n    </xs:complexType>\n\n</xs:schema>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"soap-endpoint",children:"SOAP Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Endpoint\npublic class UserEndpoint {\n    private static final String NAMESPACE_URI = "http://example.com/users";\n    \n    @Autowired\n    private UserService userService;\n    \n    @PayloadRoot(namespace = NAMESPACE_URI, localPart = "getUserRequest")\n    @ResponsePayload\n    public GetUserResponse getUser(@RequestPayload GetUserRequest request) {\n        GetUserResponse response = new GetUserResponse();\n        User user = userService.findById(request.getId());\n        \n        if (user != null) {\n            com.example.users.User soapUser = new com.example.users.User();\n            soapUser.setId(user.getId());\n            soapUser.setName(user.getName());\n            soapUser.setEmail(user.getEmail());\n            response.setUser(soapUser);\n        }\n        \n        return response;\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"web-service-\u914D\u7F6E",children:"Web Service \u914D\u7F6E"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@EnableWs\n@Configuration\npublic class WebServiceConfig extends WsConfigurerAdapter {\n    \n    @Bean\n    public ServletRegistrationBean<MessageDispatcherServlet> messageDispatcherServlet(\n            ApplicationContext applicationContext) {\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\n        servlet.setApplicationContext(applicationContext);\n        servlet.setTransformWsdlLocations(true);\n        return new ServletRegistrationBean<>(servlet, "/ws/*");\n    }\n    \n    @Bean(name = "users")\n    public DefaultWsdl11Definition defaultWsdl11Definition(XsdSchema usersSchema) {\n        DefaultWsdl11Definition wsdl11Definition = new DefaultWsdl11Definition();\n        wsdl11Definition.setPortTypeName("UsersPort");\n        wsdl11Definition.setLocationUri("/ws");\n        wsdl11Definition.setTargetNamespace("http://example.com/users");\n        wsdl11Definition.setSchema(usersSchema);\n        return wsdl11Definition;\n    }\n    \n    @Bean\n    public XsdSchema usersSchema() {\n        return new SimpleXsdSchema(new ClassPathResource("xsd/users.xsd"));\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"api-\u6587\u4EF6\u5316",children:"API \u6587\u4EF6\u5316"}),"\n",(0,r.jsx)(n.h3,{id:"openapiswagger-\u6574\u5408",children:"OpenAPI/Swagger \u6574\u5408"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springdoc</groupId>\n    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>\n    <version>2.2.0</version>\n</dependency>\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class OpenApiConfig {\n    \n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n                .info(new Info()\n                        .title("User Management API")\n                        .version("1.0")\n                        .description("API for managing users")\n                        .contact(new Contact()\n                                .name("API Support")\n                                .email("support@example.com")))\n                .servers(List.of(\n                        new Server().url("http://localhost:8080").description("Development server"),\n                        new Server().url("https://api.example.com").description("Production server")\n                ));\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"api-\u8A3B\u89E3",children:"API \u8A3B\u89E3"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api/users")\n@Tag(name = "User Management", description = "Operations related to user management")\npublic class UserController {\n    \n    @Operation(summary = "Get all users", description = "Retrieve a list of all users")\n    @ApiResponses(value = {\n        @ApiResponse(responseCode = "200", description = "Successfully retrieved users"),\n        @ApiResponse(responseCode = "500", description = "Internal server error")\n    })\n    @GetMapping\n    public ResponseEntity<List<User>> getAllUsers() {\n        // Implementation\n    }\n    \n    @Operation(summary = "Create a new user")\n    @PostMapping\n    public ResponseEntity<User> createUser(\n            @Parameter(description = "User to be created") @Valid @RequestBody User user) {\n        // Implementation\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5B89\u5168\u6027",children:"\u5B89\u5168\u6027"}),"\n",(0,r.jsx)(n.h3,{id:"api-\u91D1\u9470\u9A57\u8B49",children:"API \u91D1\u9470\u9A57\u8B49"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Component\npublic class ApiKeyAuthFilter implements Filter {\n    \n    private static final String API_KEY_HEADER = "X-API-Key";\n    \n    @Value("${app.api.key}")\n    private String validApiKey;\n    \n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        \n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        HttpServletResponse httpResponse = (HttpServletResponse) response;\n        \n        String apiKey = httpRequest.getHeader(API_KEY_HEADER);\n        \n        if (apiKey == null || !validApiKey.equals(apiKey)) {\n            httpResponse.setStatus(HttpStatus.UNAUTHORIZED.value());\n            httpResponse.getWriter().write("Invalid API Key");\n            return;\n        }\n        \n        chain.doFilter(request, response);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u901F\u7387\u9650\u5236",children:"\u901F\u7387\u9650\u5236"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Component\npublic class RateLimitingFilter implements Filter {\n    \n    private final Map<String, List<Long>> requestCounts = new ConcurrentHashMap<>();\n    private final int maxRequests = 100;\n    private final long timeWindow = 60000; // 1 minute\n    \n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        \n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        HttpServletResponse httpResponse = (HttpServletResponse) response;\n        \n        String clientIp = getClientIp(httpRequest);\n        long currentTime = System.currentTimeMillis();\n        \n        requestCounts.putIfAbsent(clientIp, new ArrayList<>());\n        List<Long> requests = requestCounts.get(clientIp);\n        \n        // Remove old requests\n        requests.removeIf(time -> currentTime - time > timeWindow);\n        \n        if (requests.size() >= maxRequests) {\n            httpResponse.setStatus(HttpStatus.TOO_MANY_REQUESTS.value());\n            httpResponse.getWriter().write("Rate limit exceeded");\n            return;\n        }\n        \n        requests.add(currentTime);\n        chain.doFilter(request, response);\n    }\n    \n    private String getClientIp(HttpServletRequest request) {\n        String xForwardedFor = request.getHeader("X-Forwarded-For");\n        if (xForwardedFor != null && !xForwardedFor.isEmpty()) {\n            return xForwardedFor.split(",")[0].trim();\n        }\n        return request.getRemoteAddr();\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6E2C\u8A66",children:"\u6E2C\u8A66"}),"\n",(0,r.jsx)(n.h3,{id:"rest-api-\u6E2C\u8A66",children:"REST API \u6E2C\u8A66"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@SpringBootTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@TestPropertySource(locations = "classpath:application-test.properties")\nclass UserControllerTest {\n    \n    @Autowired\n    private TestRestTemplate restTemplate;\n    \n    @Autowired\n    private UserRepository userRepository;\n    \n    @Test\n    void shouldCreateUser() {\n        User user = new User("John Doe", "john@example.com");\n        \n        ResponseEntity<User> response = restTemplate.postForEntity(\n            "/api/users", user, User.class);\n        \n        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CREATED);\n        assertThat(response.getBody().getName()).isEqualTo("John Doe");\n    }\n    \n    @Test\n    void shouldGetUser() {\n        User savedUser = userRepository.save(new User("Jane Doe", "jane@example.com"));\n        \n        ResponseEntity<User> response = restTemplate.getForEntity(\n            "/api/users/" + savedUser.getId(), User.class);\n        \n        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);\n        assertThat(response.getBody().getName()).isEqualTo("Jane Doe");\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"soap-web-service-\u6E2C\u8A66",children:"SOAP Web Service \u6E2C\u8A66"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass UserEndpointTest {\n    \n    @Autowired\n    private TestRestTemplate restTemplate;\n    \n    @Test\n    void shouldReturnUserFromSoapService() {\n        String soapRequest = """\n            <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"\n                              xmlns:usr="http://example.com/users">\n                <soapenv:Header/>\n                <soapenv:Body>\n                    <usr:getUserRequest>\n                        <usr:id>1</usr:id>\n                    </usr:getUserRequest>\n                </soapenv:Body>\n            </soapenv:Envelope>\n            """;\n        \n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.TEXT_XML);\n        headers.add("SOAPAction", "");\n        \n        HttpEntity<String> request = new HttpEntity<>(soapRequest, headers);\n        \n        ResponseEntity<String> response = restTemplate.postForEntity(\n            "/ws", request, String.class);\n        \n        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);\n        assertThat(response.getBody()).contains("<usr:name>");\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6700\u4F73\u5BE6\u8E10",children:"\u6700\u4F73\u5BE6\u8E10"}),"\n",(0,r.jsx)(n.h3,{id:"1-api-\u7248\u672C\u63A7\u5236",children:"1. API \u7248\u672C\u63A7\u5236"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api/v1/users")\npublic class UserV1Controller {\n    // Version 1 implementation\n}\n\n@RestController\n@RequestMapping("/api/v2/users")\npublic class UserV2Controller {\n    // Version 2 implementation\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u5206\u9801\u548C\u6392\u5E8F",children:"2. \u5206\u9801\u548C\u6392\u5E8F"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@GetMapping\npublic ResponseEntity<Page<User>> getUsers(\n        @RequestParam(defaultValue = "0") int page,\n        @RequestParam(defaultValue = "10") int size,\n        @RequestParam(defaultValue = "id") String sortBy,\n        @RequestParam(defaultValue = "asc") String sortDir) {\n    \n    Sort sort = sortDir.equalsIgnoreCase("desc") ? \n        Sort.by(sortBy).descending() : Sort.by(sortBy).ascending();\n    \n    Pageable pageable = PageRequest.of(page, size, sort);\n    Page<User> users = userService.findAll(pageable);\n    \n    return ResponseEntity.ok(users);\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u5FEB\u53D6",children:"3. \u5FEB\u53D6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Service\n@CacheConfig(cacheNames = "users")\npublic class UserService {\n    \n    @Cacheable(key = "#id")\n    public User findById(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    @CacheEvict(key = "#user.id")\n    public User save(User user) {\n        return userRepository.save(user);\n    }\n    \n    @CacheEvict(key = "#id")\n    public void delete(Long id) {\n        userRepository.deleteById(id);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.tpisoftware.com/tpu/articleDetails/1968",children:"Spring Web Service \u2500 Web Service \u7C21\u4ECB\u8207 Server \u7AEF\u5BE6\u4F5C"})}),"\n"]})]})}function c(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},84429:function(e,n,s){s.d(n,{R:()=>o,x:()=>a});var t=s(96540);let r={},i=t.createContext(r);function o(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);