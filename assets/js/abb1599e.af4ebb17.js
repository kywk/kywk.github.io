"use strict";(self.webpackChunkblog_kywk=self.webpackChunkblog_kywk||[]).push([[11537],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=r.createContext({}),u=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=u(n),d=o,y=m["".concat(i,".").concat(d)]||m[d]||c[d]||a;return n?r.createElement(y,l(l({ref:t},p),{},{components:n})):r.createElement(y,l({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,l=new Array(a);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:o,l[1]=s;for(var u=2;u<a;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},98396:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var r=n(87462),o=(n(67294),n(3905));const a={title:"Ubuntu Setup",description:"Ubuntu 20.04 LTS \u5b89\u88dd MySQL Server",tags:["SRE","Ubuntu","MySQL"],created:new Date("2022-09-20T16:00:00.000Z"),image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0"},l="[MySQL] Ubuntu 20.04 LTS \u5b89\u88dd MySQL Server",s={unversionedId:"techstack/mysql/mysql_ubuntu-setup",id:"techstack/mysql/mysql_ubuntu-setup",title:"Ubuntu Setup",description:"Ubuntu 20.04 LTS \u5b89\u88dd MySQL Server",source:"@site/blogging/moco/techstack/mysql/mysql_ubuntu-setup.md",sourceDirName:"techstack/mysql",slug:"/techstack/mysql/mysql_ubuntu-setup",permalink:"/moco/techstack/mysql/mysql_ubuntu-setup",draft:!1,tags:[{label:"SRE",permalink:"/moco/tags/sre"},{label:"Ubuntu",permalink:"/moco/tags/ubuntu"},{label:"MySQL",permalink:"/moco/tags/my-sql"}],version:"current",frontMatter:{title:"Ubuntu Setup",description:"Ubuntu 20.04 LTS \u5b89\u88dd MySQL Server",tags:["SRE","Ubuntu","MySQL"],created:"2022-09-20T16:00:00.000Z",image:"https://lh3.googleusercontent.com/pw/AL9nZEUA9Ifvd5Z8SXDWkeVB6AC4MPGwnXaL6kBXNPoXwOQQ2jOcZ1Jw_0p8TKK8C3ZX0e67_FOY15eDrm7aaXSQJcKtoUzC80SAQEHsaBy6qS2AqNNs5VUFNXBKm439y_1wkvmDl-PnL8ReojnIumNlEvOXBg=w800-no?authuser=0"},sidebar:"tutorialSidebar",previous:{title:"gRPC",permalink:"/moco/category/grpc-1"},next:{title:"OData Protocol",permalink:"/moco/techstack/odata"}},i={},u=[{value:"\u5b89\u88dd MySQL",id:"\u5b89\u88dd-mysql",level:2},{value:"\u78ba\u8a8d\u670d\u52d9\u6b63\u5e38",id:"\u78ba\u8a8d\u670d\u52d9\u6b63\u5e38",level:3},{value:"\u8a2d\u5b9a\u5b89\u5168\u6027\uff08Security\uff09",id:"\u8a2d\u5b9a\u5b89\u5168\u6027security",level:2},{value:"\u9a57\u8b49\u5bc6\u78bc\u63d2\u4ef6",id:"\u9a57\u8b49\u5bc6\u78bc\u63d2\u4ef6",level:3},{value:"root \u5bc6\u78bc",id:"root-\u5bc6\u78bc",level:3},{value:"\u7121\u6cd5\u8a2d\u5b9a root \u5bc6\u78bc",id:"\u7121\u6cd5\u8a2d\u5b9a-root-\u5bc6\u78bc",level:4},{value:"\u533f\u540d\u7528\u6236",id:"\u533f\u540d\u7528\u6236",level:3},{value:"\u7981\u6b62\u9060\u7aef root \u767b\u9304",id:"\u7981\u6b62\u9060\u7aef-root-\u767b\u9304",level:3},{value:"\u522a\u9664\u6e2c\u8a66\u8cc7\u6599\u5eab",id:"\u522a\u9664\u6e2c\u8a66\u8cc7\u6599\u5eab",level:3},{value:"\u91cd\u65b0\u8f09\u5165\u6b0a\u9650\u8868",id:"\u91cd\u65b0\u8f09\u5165\u6b0a\u9650\u8868",level:3},{value:"\u78ba\u8a8d\u670d\u52d9\u904b\u4f5c",id:"\u78ba\u8a8d\u670d\u52d9\u904b\u4f5c",level:3},{value:"\u65b0\u5efa\u7ba1\u7406\u4f7f\u7528\u8005",id:"\u65b0\u5efa\u7ba1\u7406\u4f7f\u7528\u8005",level:2},{value:"See Also",id:"see-also",level:2}],p={toc:u};function c(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"mysql-ubuntu-2004-lts-\u5b89\u88dd-mysql-server"},"[MySQL]"," Ubuntu 20.04 LTS \u5b89\u88dd MySQL Server"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u958b\u767c\u74b0\u5883\u5e7e\u4e4e\u90fd\u5df2\u7d93\u6539\u7528 docker \u5728\u8dd1 MySQL \u4e86,\n\u5076\u723e\u9084\u662f\u6703\u9047\u5230\u9700\u8981\u5728\u4e3b\u6a5f / VM \u4e0a\u5b89\u88dd MySQL \u7684\u60c5\u6cc1.\n\u96a8\u8457\u7248\u672c\u8fed\u4ee3, \u904e\u53bb\u8a2d\u5b9a\u65b9\u5f0f\u96d6\u4e0d\u898b\u5f97\u4e0d\u9069\u7528, \u4f46\u53ef\u80fd\u6709\u66f4\u5efa\u8b70\u7684\u8a2d\u5b9a\u5de5\u5177, \u7c21\u55ae\u7d00\u9304.")),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"\u672c\u6587\u4e3b\u8981\u53c3\u8003 ",(0,o.kt)("a",{parentName:"em",href:"https://ui-code.com/archives/293"},"[\u6559\u5b78][Ubuntu \u67b6\u7ad9] \u5728 Ubuntu 20.04 \u4e0a\u5b89\u88dd MySQL Server | \u512a\u7a0b\u5f0f"),",\n\u4e26\u88dc\u5145\u4e00\u4e9b\u554f\u984c\u6392\u9664")),(0,o.kt)("h2",{id:"\u5b89\u88dd-mysql"},"\u5b89\u88dd MySQL"),(0,o.kt)("p",null,"\u9664\u975e\u8981\u5b89\u88dd\u5176\u4ed6\u793e\u7fa4\u7dad\u8b77 (Ex: mariadb) \u6216\u7279\u5225\u7248\u672c\u7684 MySQL (Ex: AliSQL...),\n\u5426\u5247\u5728 Ubuntu 20.04 \u4e0a\u5b89\u88dd MySQL, \u76f4\u63a5\u900f\u904e apt \u5b89\u88dd\u5373\u53ef."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"sudo apt update && sudo apt install mysql-server\n")),(0,o.kt)("p",null,"\u7576\u63d0\u793a\u5b89\u88dd MySQL \u5957\u4ef6\u6642, \u6309 ",(0,o.kt)("inlineCode",{parentName:"p"},"y")," ",(0,o.kt)("inlineCode",{parentName:"p"},"ENTER")," \u78ba\u5b9a\u5b89\u88dd."),(0,o.kt)("h3",{id:"\u78ba\u8a8d\u670d\u52d9\u6b63\u5e38"},"\u78ba\u8a8d\u670d\u52d9\u6b63\u5e38"),(0,o.kt)("p",null,"MySQL \u5b8c\u6210\u5f8c, \u53ef\u4ee5\u6aa2\u67e5 MySQL \u670d\u52d9\u662f\u5426\u6b63\u5728\u904b\u884c."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service mysql status\n")),(0,o.kt)("p",null,"\u670d\u52d9\u6b63\u5e38\u904b\u884c\u7684\u8a71, \u6703\u770b\u5230\u5982\u4e0b\u6240\u793a\u7684\u7da0\u8272 Active \u72c0\u614b."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-txt"},'\u25cf mysql.service - MySQL Community Server\n     Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)\n     Active: active (running) since Wed 2021-09-08 07:16:49 UTC; 18s ago\n   Main PID: 32713 (mysqld)\n     Status: "Server is operational"\n      Tasks: 38 (limit: 4705)\n     Memory: 356.6M\n     CGroup: /system.slice/mysql.service\n             \u2514\u250032713 /usr/sbin/mysqld\nSep 08 07:16:48 ubuntu-20 systemd[1]: Starting MySQL Community Server...\nSep 08 07:16:49 ubuntu-20 systemd[1]: Started MySQL Community Server.\n')),(0,o.kt)("h2",{id:"\u8a2d\u5b9a\u5b89\u5168\u6027security"},"\u8a2d\u5b9a\u5b89\u5168\u6027\uff08Security\uff09"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"mysql_secure_installation")," \u662f\u5b98\u65b9\u5efa\u8b70\u70ba MySQL Server \u914d\u7f6e\u5b89\u5168\u6027\u7684\u5c0f\u5de5\u5177."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"sudo mysql_secure_installation\n")),(0,o.kt)("p",null,"\u5982\u679c\u5df2\u7d93\u6709\u8a2d\u7f6e\u4e86 root \u5bc6\u78bc, \u6703\u63d0\u793a\u5728\u6b64\u8655\u8f38\u5165\u5bc6\u78bc."),(0,o.kt)("h3",{id:"\u9a57\u8b49\u5bc6\u78bc\u63d2\u4ef6"},"\u9a57\u8b49\u5bc6\u78bc\u63d2\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Securing the MySQL server deployment.\nConnecting to MySQL using a blank password.\nVALIDATE PASSWORD PLUGIN can be used to test passwords\nand improve security. It checks the strength of password\nand allows the users to set only those passwords which are\nsecure enough. Would you like to setup VALIDATE PASSWORD plugin?\nPress y|Y for Yes, any other key for No: \n")),(0,o.kt)("p",null,"\u662f\u5426\u8981\u8a2d\u5b9a\u9a57\u8b49\u5bc6\u78bc\u63d2\u4ef6 (VALIDATE PASSWORD PLUGIN).\n\u9664\u975e\u60f3\u8981\u5f37\u5236\u57f7\u884c\u56b4\u683c\u7684\u5bc6\u78bc\u898f\u5247, \u4e0d\u7136\u9019\u4e26\u4e0d\u662f\u771f\u6b63\u9700\u8981\u7684."),(0,o.kt)("p",null,"\u5982\u679c\u4e0d\u60f3\u8a2d\u7f6e\u9a57\u8b49\u5bc6\u78bc\u63d2\u4ef6\u7684\u8a71, \u76f4\u63a5\u6309 ",(0,o.kt)("inlineCode",{parentName:"p"},"ENTER"),"."),(0,o.kt)("h3",{id:"root-\u5bc6\u78bc"},"root \u5bc6\u78bc"),(0,o.kt)("p",null,"\u5982\u679c\u6c92\u6709\u8a2d\u7f6e\u904e root \u5bc6\u78bc, \u6703\u8981\u6c42\u8a2d\u7f6e\u5bc6\u78bc:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Please set the password for root here.\nNew password: \nRe-enter new password: \n")),(0,o.kt)("p",null,"\u5982\u679c\u5df2\u6709 root \u5bc6\u78bc, \u6703\u8a62\u554f\u662f\u5426\u66f4\u6539\u5bc6\u78bc."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Using existing password for root.\nChange the password for root ? ((Press y|Y for Yes, any other key for No) :\n")),(0,o.kt)("h4",{id:"\u7121\u6cd5\u8a2d\u5b9a-root-\u5bc6\u78bc"},"\u7121\u6cd5\u8a2d\u5b9a root \u5bc6\u78bc"),(0,o.kt)("p",null,"\u56e0\u7248\u672c\u9810\u8a2d\u914d\u7f6e\u4e0d\u540c, \u8a2d\u5b9a root \u5bc6\u78bc\u6642\u53ef\u80fd\u6703\u51fa\u73fe\u932f\u8aa4"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"... Failed! Error: SET PASSWORD has no significance for user 'root'@'localhost' as the authentication method used doesn't store authentication data in the MySQL server. Please consider using ALTER USER instead if you want to change authentication parameters.")),(0,o.kt)("p",null,"\u9047\u5230\u9019\u60c5\u6cc1\u5148\u4e2d\u65b7 ",(0,o.kt)("inlineCode",{parentName:"p"},"mysql_secure_installation")," \u6d41\u7a0b,\n\u5728\u4e3b\u6a5f\u4e0a\u76f4\u63a5\u900f\u904e MySQL client \u9032\u53bb\u8a2d\u5b9a root \u5bc6\u78bc\u518d\u91cd\u65b0\u57f7\u884c ",(0,o.kt)("inlineCode",{parentName:"p"},"mysql_secure_installation"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ sudo mysql\n\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password by 'mynewpassword';\n")),(0,o.kt)("p",null,"Ref: ",(0,o.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/72103302/mysql-installation-on-ubuntu-20-04-error-when-using-mysql-secure-installation"},"MySQL installation on Ubuntu 20.04 error when using mysql_secure_installation - Stack Overflow")),(0,o.kt)("h3",{id:"\u533f\u540d\u7528\u6236"},"\u533f\u540d\u7528\u6236"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"By default, a MySQL installation has an anonymous user,\nallowing anyone to log into MySQL without having to have\na user account created for them. This is intended only for\ntesting, and to make the installation go a bit smoother.\nYou should remove them before moving into a production\nenvironment.\n\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : \n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"y")," ",(0,o.kt)("inlineCode",{parentName:"p"},"ENTER")," \u522a\u9664\u533f\u540d\u7528\u6236."),(0,o.kt)("h3",{id:"\u7981\u6b62\u9060\u7aef-root-\u767b\u9304"},"\u7981\u6b62\u9060\u7aef root \u767b\u9304"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Normally, root should only be allowed to connect from\n'localhost'. This ensures that someone cannot guess at\nthe root password from the network.\n\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : \n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"y")," ",(0,o.kt)("inlineCode",{parentName:"p"},"ENTER")," \u7981\u6b62\u9060\u7aef root \u767b\u9304, \u53ef\u9632\u6b62\u6a5f\u5668\u4eba\u548c\u99ed\u5ba2\u5617\u8a66\u731c\u6e2c root \u5bc6\u78bc."),(0,o.kt)("h3",{id:"\u522a\u9664\u6e2c\u8a66\u8cc7\u6599\u5eab"},"\u522a\u9664\u6e2c\u8a66\u8cc7\u6599\u5eab"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"By default, MySQL comes with a database named 'test' that\nanyone can access. This is also intended only for testing,\nand should be removed before moving into a production\nenvironment.\n\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : \n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"y")," ",(0,o.kt)("inlineCode",{parentName:"p"},"ENTER")," \u522a\u9664\u6e2c\u8a66\u8cc7\u6599\u5eab."),(0,o.kt)("h3",{id:"\u91cd\u65b0\u8f09\u5165\u6b0a\u9650\u8868"},"\u91cd\u65b0\u8f09\u5165\u6b0a\u9650\u8868"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Reloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\n\nReload privilege tables now? (Press y|Y for Yes, any other key for No) :\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"y")," ",(0,o.kt)("inlineCode",{parentName:"p"},"ENTER")," \u91cd\u65b0\u8f09\u5165\u6b0a\u9650\u8868 (Privilege Tables)."),(0,o.kt)("h3",{id:"\u78ba\u8a8d\u670d\u52d9\u904b\u4f5c"},"\u78ba\u8a8d\u670d\u52d9\u904b\u4f5c"),(0,o.kt)("p",null,"\u5b8c\u6210\u5f8c, \u5373\u53ef\u6e2c\u8a66 MySQL \u662f\u5426\u6b63\u5e38\u904b\u4f5c.\n\u4ee5\u4e0b\u767b\u9304 MySQL Server \u4e26\u904b\u884c version \u547d\u4ee4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"sudo mysqladmin -p -u root version\n\nmysqladmin  Ver 8.0.26-0ubuntu0.20.04.2 for Linux on x86_64 ((Ubuntu))\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\nServer version          8.0.26-0ubuntu0.20.04.2\nProtocol version        10\nConnection              Localhost via UNIX socket\nUNIX socket             /var/run/mysqld/mysqld.sock\nUptime:                 6 min 23 sec\nThreads: 2  Questions: 11  Slow queries: 0  Opens: 130  Flush tables: 3  Open tables: 49  Queries per second avg: 0.028\n")),(0,o.kt)("p",null,"\u51fa\u73fe\u7248\u672c\u8cc7\u8a0a\u5f8c, \u8868\u793a\u5df2\u7d93\u6210\u529f\u5730\u5728 Ubuntu 20.04 \u4e0a\u5b89\u88dd\u548c\u914d\u7f6e\u4e86 MySQL."),(0,o.kt)("h2",{id:"\u65b0\u5efa\u7ba1\u7406\u4f7f\u7528\u8005"},"\u65b0\u5efa\u7ba1\u7406\u4f7f\u7528\u8005"),(0,o.kt)("p",null,"...TBD..."),(0,o.kt)("h2",{id:"see-also"},"See Also"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://ui-code.com/archives/293"},"[\u6559\u5b78][Ubuntu \u67b6\u7ad9] \u5728 Ubuntu 20.04 \u4e0a\u5b89\u88dd MySQL Server | \u512a\u7a0b\u5f0f")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/72103302/mysql-installation-on-ubuntu-20-04-error-when-using-mysql-secure-installation"},"MySQL installation on Ubuntu 20.04 error when using mysql_secure_installation - Stack Overflow")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://mariadb.org"},"MariaDB Foundation - MariaDB.org")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/alibaba/AliSQL"},"alibaba/AliSQL: AliSQL is a MySQL branch originated from Alibaba Group. Fetch document from Release Notes at bottom"))))}c.isMDXComponent=!0}}]);